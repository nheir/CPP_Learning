<!DOCTYPE html>
<html lang="fr" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619">
    <meta name="description" content="Sur cette page, nous vous montrerons comment impl√©menter vos propres op√©rateurs.
Nous en profiterons aussi pour vous expliquer comment d√©finir un alias de type et comment d√©finir des fonctions amies.
D√©finition Un op√©rateur est une fonction, mais qui peut √™tre appel√©e avec une syntaxe ‚Äúsimplifi√©e‚Äù.
Prenons l‚Äôexemple de la concat√©nation de std::string :
auto a = std::string { &#34;a&#34; }; auto b = std::string { &#34;b&#34; }; auto ab = a &#43; b; Dans le code ci-dessus, l‚Äôexpression a &#43; b est en fait un appel √† une fonction dont la signature est quelque chose comme: operator&#43;(std::string, std::string).">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Op√©rateurs ‚ûó :: Cours de C&#43;&#43; - Niveau Master">
    <meta name="twitter:description" content="Sur cette page, nous vous montrerons comment impl√©menter vos propres op√©rateurs.
Nous en profiterons aussi pour vous expliquer comment d√©finir un alias de type et comment d√©finir des fonctions amies.
D√©finition Un op√©rateur est une fonction, mais qui peut √™tre appel√©e avec une syntaxe ‚Äúsimplifi√©e‚Äù.
Prenons l‚Äôexemple de la concat√©nation de std::string :
auto a = std::string { &#34;a&#34; }; auto b = std::string { &#34;b&#34; }; auto ab = a &#43; b; Dans le code ci-dessus, l‚Äôexpression a &#43; b est en fait un appel √† une fonction dont la signature est quelque chose comme: operator&#43;(std::string, std::string).">
    <meta property="og:url" content="/chapter2/6-polygon/index.html">
    <meta property="og:site_name" content="Cours de C&#43;&#43; - Niveau Master">
    <meta property="og:title" content="Op√©rateurs ‚ûó :: Cours de C&#43;&#43; - Niveau Master">
    <meta property="og:description" content="Sur cette page, nous vous montrerons comment impl√©menter vos propres op√©rateurs.
Nous en profiterons aussi pour vous expliquer comment d√©finir un alias de type et comment d√©finir des fonctions amies.
D√©finition Un op√©rateur est une fonction, mais qui peut √™tre appel√©e avec une syntaxe ‚Äúsimplifi√©e‚Äù.
Prenons l‚Äôexemple de la concat√©nation de std::string :
auto a = std::string { &#34;a&#34; }; auto b = std::string { &#34;b&#34; }; auto ab = a &#43; b; Dans le code ci-dessus, l‚Äôexpression a &#43; b est en fait un appel √† une fonction dont la signature est quelque chose comme: operator&#43;(std::string, std::string).">
    <meta property="og:locale" content="fr">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Classes">
    <meta itemprop="name" content="Op√©rateurs ‚ûó :: Cours de C&#43;&#43; - Niveau Master">
    <meta itemprop="description" content="Sur cette page, nous vous montrerons comment impl√©menter vos propres op√©rateurs.
Nous en profiterons aussi pour vous expliquer comment d√©finir un alias de type et comment d√©finir des fonctions amies.
D√©finition Un op√©rateur est une fonction, mais qui peut √™tre appel√©e avec une syntaxe ‚Äúsimplifi√©e‚Äù.
Prenons l‚Äôexemple de la concat√©nation de std::string :
auto a = std::string { &#34;a&#34; }; auto b = std::string { &#34;b&#34; }; auto ab = a &#43; b; Dans le code ci-dessus, l‚Äôexpression a &#43; b est en fait un appel √† une fonction dont la signature est quelque chose comme: operator&#43;(std::string, std::string).">
    <meta itemprop="wordCount" content="719">
    <title>Op√©rateurs ‚ûó :: Cours de C&#43;&#43; - Niveau Master</title>
    <link href="../../css/fontawesome-all.min.css?1729268718" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fontawesome-all.min.css?1729268718" rel="stylesheet"></noscript>
    <link href="../../css/nucleus.css?1729268718" rel="stylesheet">
    <link href="../../css/auto-complete.css?1729268718" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/auto-complete.css?1729268718" rel="stylesheet"></noscript>
    <link href="../../css/perfect-scrollbar.min.css?1729268718" rel="stylesheet">
    <link href="../../css/fonts.css?1729268718" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fonts.css?1729268718" rel="stylesheet"></noscript>
    <link href="../../css/theme.css?1729268718" rel="stylesheet">
    <link href="../../css/theme-mine.css?1729268718" rel="stylesheet" id="R-variant-style">
    <link href="../../css/chroma-relearn-light.css?1729268718" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../css/print.css?1729268718" rel="stylesheet" media="print">
    <script src="../../js/variant.js?1729268718"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'mine' ] );
      // translations
      window.T_Copy_to_clipboard = `Copier dans le presse-papiers`;
      window.T_Copied_to_clipboard = `Copi√© dans le presse-papiers!`;
      window.T_Copy_link_to_clipboard = `Copier le lien dans le presse-papiers`;
      window.T_Link_copied_to_clipboard = `Lien copi√© dans le presse-papiers!`;
      window.T_Reset_view = `R√©initialiser la vue`;
      window.T_View_reset = `Vue r√©initialis√©e!`;
      window.T_No_results_found = `Aucun r√©sultat trouv√© pour "{0}"`;
      window.T_N_results_found = `{1} r√©sultats trouv√©s pour "{0}"`;
    </script>
  </head>
  <body class="mobile-support html disableInlineCopyToClipboard" data-url="../../chapter2/6-polygon/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table des mati√®res (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#d√©finition">D√©finition</a></li>
        <li><a href="#m√©thodologie-de-lexercice">M√©thodologie de l&rsquo;exercice</a></li>
        <li><a href="#d√©finition-de-la-classe">D√©finition de la classe</a></li>
        <li><a href="#ajout-dun-sommet">Ajout d&rsquo;un sommet</a></li>
        <li><a href="#inspection-des-variables">Inspection des variables</a></li>
        <li><a href="#op√©rateur-dindice">Op√©rateur d&rsquo;indice</a></li>
        <li><a href="#un-ami-imprimeur">Un ami imprimeur</a></li>
        <li><a href="#synth√®se">Synth√®se</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../index.html"><span itemprop="name">Accueil</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../chapter2/index.html"><span itemprop="name">Classes</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Op√©rateurs ‚ûó</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../chapter2/5-modules/index.html" title="Modularit√© üß± (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../chapter2/test/index.html" title="Questionnaire ‚òë (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Aller plus loin"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable chapter2" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="op√©rateurs-">Op√©rateurs ‚ûó</h1>

<p>Sur cette page, nous vous montrerons comment impl√©menter vos propres op√©rateurs.<br>
Nous en profiterons aussi pour vous expliquer comment d√©finir un alias de type et comment d√©finir des fonctions amies.</p>
<hr>
<h3 id="d√©finition">D√©finition</h3>
<p>Un op√©rateur est une fonction, mais qui peut √™tre appel√©e avec une syntaxe &ldquo;simplifi√©e&rdquo;.</p>
<p>Prenons l&rsquo;exemple de la concat√©nation de <code>std::string</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">a</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">{</span> <span class="s">&#34;a&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">b</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">{</span> <span class="s">&#34;b&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span></span></span></code></pre></div>
<p>Dans le code ci-dessus, l&rsquo;expression <code>a + b</code> est en fait un appel √† une fonction dont la signature est quelque chose comme: <code>operator+(std::string, std::string)</code>.<br>
Le code suivant aurait donc √©t√© parfaitement √©quivalent, mais moins agr√©able √† lire :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">a</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">{</span> <span class="s">&#34;a&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">b</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">{</span> <span class="s">&#34;b&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">ab</span> <span class="o">=</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>      <span class="c1">// =&gt; une mani√®re moche d&#39;√©crire a + b
</span></span></span></code></pre></div>
<p>Il y a deux mani√®res de d√©finir des op√©rateurs : via des fonctions libres ou via des fonctions-membres.<br>
Voici un exemple pour chacune des m√©thodes :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// M√©thode 1 - avec une fonction libre
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Point</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Point</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Point</span> <span class="n">p2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">p1</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">y</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">p1</span> <span class="p">{</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">p2</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// √©quivalent √† :
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// auto p3 = operator+(p1, p2)m
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// M√©thode 2 - avec une fonction-membre
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">Point</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Point</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">y</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">p1</span> <span class="p">{</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">Point</span> <span class="n">p2</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// √©quivalent √† :
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// auto p3 = p1.operator+(p2);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
<p>L&rsquo;op√©rateur <code>+</code> √©tant un <strong>op√©rateur binaire</strong> (c&rsquo;est-√†-dire qu&rsquo;il attend 2 op√©randes), notez bien que la signature prend deux param√®tres dans le cas de la fonction libre et un seul dans le cas de la fonction-membre (instance courante + un param√®tre = 2 op√©randes).</p>
<hr>
<h3 id="m√©thodologie-de-lexercice">M√©thodologie de l&rsquo;exercice</h3>
<p>Pour assimiler un peu ces notions, nous vous proposons un petit exercice.<br>
Commencez par ouvrir le fichier <code>chap-02/5-operators/main.cpp</code>.</p>
<p>Vous utiliserez la m√™me m√©thodologie que pour <code>1-first_class.cpp</code> :</p>
<ol>
<li>D√©commentez la prochaine ligne du <code>main</code>.</li>
<li>Ecrivez le code permettant de la faire compiler.</li>
<li>Compilez et testez.</li>
<li>Si √ßa ne fonctionne pas, modifiez le code, et recommencez √† partir de l&rsquo;√©tape 3.</li>
<li>Si √ßa fonctionne, recommencez √† partir de l&rsquo;√©tape 1, jusqu&rsquo;√† ce que tout le code du <code>main</code> soit d√©comment√©.</li>
</ol>
<p>Vous aurez √† impl√©menter une classe <code>Polygon</code> contenant un tableau dynamique de <code>Vertex</code>.</p>
<p>Vous ajouterez deux fichiers <code>Polygon.h</code> et <code>Polygon.cpp</code>, afin de contenir la d√©finition de votre classe et l&rsquo;impl√©mentation de ses fonctions.</p>
<hr>
<h3 id="d√©finition-de-la-classe">D√©finition de la classe</h3>
<p>D√©commentez la premi√®re instruction du <code>main</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Polygon</span> <span class="n">polygon</span><span class="p">;</span></span></span></code></pre></div>
<p>Cr√©ez un nouveau fichier <code>Polygon.h</code> et ajoutez-y la d√©finition d&rsquo;une classe <code>Polygon</code>, pour le moment vide.<br>
Que faut-il mettre au d√©but du header ? Que devez-vous penser √† faire dans <code>main.cpp</code> ?</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <p>Au d√©but des headers, il faut √©crire <code>#pragma once</code>.<br>
Dans le fichier <code>main.cpp</code>, on pense √† inclure le nouveau fichier <code>Polygon.h</code>.</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>

        </div>
    </div>

</div>
<hr>
<h3 id="ajout-dun-sommet">Ajout d&rsquo;un sommet</h3>
<p>D√©commentez l&rsquo;instruction suivante :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">polygon</span><span class="p">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span></span></span></code></pre></div>
<p>Pour ajouter un sommet au polyg√¥ne, il va d√©j√† falloir faire en sorte que le polyg√¥ne puisse en contenir.</p>
<p>Afin de repr√©senter les sommets, vous allez utiliser la structure <code>std::pair&lt;int, int&gt;</code>.
Ajoutez un attribut <code>_vertices</code> qui puisse contenir un tableau dynamique de sommets.<br>
Quel doit-√™tre le type de <code>_vertices</code> ? Dans quel header est d√©fini <code>std::pair</code> ?</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <p>Les attributs doivent √™tre plac√©s autant que possible dans la partie priv√©e.</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">_vertices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>

        </div>
    </div>

</div>
<p>Comme <code>std::pair&lt;int, int&gt;</code> n&rsquo;est ni tr√®s lisible, ni tr√®s repr√©sentatif de ce qui va √™tre contenu dedans, vous allez cr√©er un <strong>alias</strong> dessus : <code>Vertex</code>.<br>
Pour d√©finir un alias (√©quivalent au <code>typedef</code> en C), on utilise le mot-clef <code>using</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">AliasName</span> <span class="o">=</span> <span class="n">OriginalType</span><span class="p">;</span></span></span></code></pre></div>
<p>Adaptez cette instruction et placez-la dans <code>Polygon.h</code>, juste avant la d√©finition de votre classe. Modifiez la d√©finition de <code>_vertices</code> afin d&rsquo;utiliser cet alias.

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <div class="highlight wrap-code" hl_lines=[['\x05' '\x05'] ['\t' '\t']]><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line hl"><span class="cl"><span class="k">using</span> <span class="n">Vertex</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line hl"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">&gt;</span> <span class="n">_vertices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
<div class="box notices cstyle note">
  <div class="box-label">
    <i class="fa-fw fas fa-exclamation-circle"></i> Remarque
  </div>
  <div class="box-content">
<p>Il est aussi possible de placer l&rsquo;instruction pour d√©finir un alias √† l&rsquo;int√©rieur d&rsquo;une classe (partie priv√©e ou publique, en fonction de si on veut pouvoir y acc√©der de l&rsquo;ext√©rieur ou pas), ainsi que dans le corps d&rsquo;une fonction (accessible alors uniquement depuis cette fonction).</p>
  </div>
</div>

        </div>
    </div>

</div></p>
<p>Ajoutez enfin la fonction <code>add_vertex</code> √† votre classe.
Vous l&rsquo;impl√©menterez dans un nouveau fichier <code>Polygon.cpp</code>.<br>
Pour construire un <code>Vertex</code> (aka <code>std::pair&lt;int, int&gt;</code>), sachez que vous pouvez passer deux entiers √† son constructeur.</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <p>Voici une impl√©mentation possible pour <code>add_vertex</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Polygon</span><span class="o">::</span><span class="n">add_vertex</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">_vertices</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fa-fw fas fa-lightbulb"></i> Astuce
  </div>
  <div class="box-content">
<p>La fonction <code>emplace_back</code> de <code>vector</code> est un peu sp√©ciale.
On peut lui passer directement les arguments que l&rsquo;on passerait au constructeur de l&rsquo;objet qu&rsquo;on souhaite ajouter au tableau.<br>
Du coup, plut√¥t que d&rsquo;√©crire <code>_vertices.emplace_back(Vertex { x, y })</code>, on peut directement √©crire <code>_vertices.emplace_back(x, y)</code>.<br>
Plut√¥t pratique, non ?</p>
  </div>
</div>

        </div>
    </div>

</div>
<hr>
<h3 id="inspection-des-variables">Inspection des variables</h3>
<p>Pour v√©rifier que le programme fonctionne correctement, vous allez utiliser le debuggeur.<br>
Pensez bien √† compiler votre programme avec <code>-g</code> et √† modifier la valeur de <code>program</code> dans le fichier <code>.vscode/launch.json</code>.</p>
<p>Placez ensuite un breakpoint sur la ligne <code>polygon.add_vertex(2, 3);</code> du <code>main</code>.<br>
<a href="#R-image-682496253d4b16309b9a489f62632295" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="../../images/chapter2/6-breakpoint-v2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-682496253d4b16309b9a489f62632295"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="../../images/chapter2/6-breakpoint-v2.png"></a></p>
<p>Lancez ensuite le programme avec F5.<br>
Votre vue devrait d√©sormais ressembler √† celle-ci si vous vous placez dans l&rsquo;onglet <code>Ex√©cution</code> √† gauche :
<a href="#R-image-5016f637a8d265ee2c9d24abb5a1d284" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="../../images/chapter2/6-execution-v2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5016f637a8d265ee2c9d24abb5a1d284"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="../../images/chapter2/6-execution-v2.png"></a></p>
<p>Dans la fen√™tre des variables, en haut √† gauche, cliquez sur la variable <code>polygon</code>, puis sur son membre <code>_vertices</code>.<br>
Celui-ci ne devrait rien contenir.</p>
<p>Appuyez sur F10 pour ex√©cuter l&rsquo;instruction sur la ligne 9.<br>
Vous devriez constater que <code>_vertices</code> contient d√©sormais le sommet (2, 3).
<a href="#R-image-0a3db3d3a86d13d58d3b15721d98227b" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="../../images/chapter2/6-vertices.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0a3db3d3a86d13d58d3b15721d98227b"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="../../images/chapter2/6-vertices.png"></a></p>
<hr>
<h3 id="op√©rateur-dindice">Op√©rateur d&rsquo;indice</h3>
<p>D√©commentez les instructions :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">polygon</span><span class="p">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">polygon</span><span class="p">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;(&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">vertex</span><span class="p">.</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">vertex</span><span class="p">.</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// -&gt; (4,5)
</span></span></span></code></pre></div>
<p>Impl√©mentez l&rsquo;op√©rateur <code>[]</code> pour la classe <code>Polygon</code>, sachant que les deux instructions suivantes sont √©quivalentes :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">.</span><span class="k">operator</span><span class="p">[](</span><span class="mi">1</span><span class="p">);</span></span></span></code></pre></div>
<p>Etant donn√© que cet op√©rateur ne modifie pas les attributs de <code>Polygon</code>, que faut-il ajouter √† la fin de la signature ?</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Vertex</span> <span class="k">operator</span><span class="p">[](</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">_vertices</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
<p>On pense bien √† mettre le <code>const</code> sur cette fonction-membre, puisqu&rsquo;elle n&rsquo;a pas vocation √† modifier l&rsquo;√©tat de l&rsquo;objet.</p>

        </div>
    </div>

</div>
<hr>
<h3 id="un-ami-imprimeur">Un ami imprimeur</h3>
<p>D√©commentez la derni√®re instruction :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">polygon</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span></span></span></code></pre></div>
<p>Le but de cette derni√®re partie est d&rsquo;impl√©menter l&rsquo;op√©rateur de flux <code>&lt;&lt;</code> pour la classe <code>Polygon</code>.</p>
<p>La premi√®re op√©rande de l&rsquo;op√©rateur <code>&lt;&lt;</code> est le flux dans lequel on souhaite √©crire.<br>
Le type associ√© est <code>std::ostream</code>, et on le passe par r√©f√©rence, car on ne veut pas cr√©er de copie du flux √† l&rsquo;appel de la fonction.<br>
Ce flux est ensuite renvoy√© comme valeur de retour, afin de pouvoir cha√Æner l&rsquo;appel :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">polygon</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// =&gt; std::cout &lt;&lt; polygon
</span></span></span><span class="line"><span class="cl"><span class="c1">//    ^^^^^^^^^^^^^^^^^^^^ &lt;&lt; std::endl
</span></span></span></code></pre></div>
<p>Comme la premi√®re op√©rande n&rsquo;est pas de type <code>Polygon</code>, nous ne pouvons pas impl√©menter l&rsquo;op√©rateur <code>&lt;&lt;</code> en tant que fonction-membre de <code>Polygon</code>.<br>
On peut n√©anmoins d√©finir une fonction libre, dont le prototype est :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Polygon</span> <span class="n">polygon</span><span class="p">);</span></span></span></code></pre></div>
<p>Essayez d&rsquo;impl√©menter cette fonction.
Vous placerez la d√©claration dans <code>Polygon.h</code> et la d√©finition dans <code>Polygon.cpp</code>.
Pour son contenu, faites pour le moment en sorte qu&rsquo;elle affiche <code>&quot;This is a polygon&quot;</code> dans le flux.</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <p>Dans <code>Polygon.h</code> :</p>
<div class="highlight wrap-code" hl_lines=[['\x02' '\x02'] ['\r' '\r']]><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line hl"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ostream&gt;</span><span class="cp"> </span><span class="c1">// -&gt; pour pouvoir utiliser le type std::ostream
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Vertex</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line hl"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Polygon</span> <span class="n">polygon</span><span class="p">);</span></span></span></code></pre></div>
<p>Dans <code>Polygon.cpp</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Polygon</span> <span class="n">polygon</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;This is a polygon&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>

        </div>
    </div>

</div>
<p>Maintenant que vous avez d√©fini votre op√©rateur, vous allez modifier son impl√©mentation afin de pouvoir afficher le contenu de <code>polygon</code>.<br>
Nous attendrons dans la console le r√©sultat suivant :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-b" data-lang="b"><span class="line"><span class="cl"><span class="c">(2</span><span class="nt">,</span><span class="c">3) (4</span><span class="nt">,</span><span class="c">5) (6</span><span class="nt">,</span><span class="c">7) </span></span></span></code></pre></div>
<p>L&rsquo;inconv√©nient ici, c&rsquo;est qu&rsquo;on ne peut pas acc√©der √† <code>_vertices</code> depuis <code>operator&lt;&lt;</code>, car <code>_vertices</code> est un attribut priv√© de <code>Polygon</code> et <code>operator&lt;&lt;</code> une fonction libre.<br>
Il est possible de contourner cette limitation en d√©clarant la fonction comme √©tant <strong>amie</strong> de la classe.
En effet, les fonctions amies d&rsquo;une classe ont le droit d&rsquo;acc√©der √† la partie priv√©e de celle-ci.</p>
<p>Pour d√©clarer une fonction amie, on place le prototype de la fonction √† l&rsquo;int√©rieur de la d√©finition de la classe, pr√©c√©d√©e du mot-clef <code>friend</code>.<br>
Par exemple :</p>
<div class="highlight wrap-code" linenos="table"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SomethingHidden</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">friend</span> <span class="kt">void</span> <span class="nf">display_content</span><span class="p">(</span><span class="n">SomethingHidden</span> <span class="n">something</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_password</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">display_content</span><span class="p">(</span><span class="n">SomethingHidden</span> <span class="n">something</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">something</span><span class="p">.</span><span class="n">_password</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>Dans le code ci-dessus, √† la ligne 11, le compilateur autorise l&rsquo;acc√®s √† l&rsquo;attribut priv√© <code>SomethingHidden::_password</code>, car <code>display_content</code> est une fonction amie de la classe.</p>
<div class="box notices cstyle info">
  <div class="box-label">
    <i class="fa-fw fas fa-info-circle"></i> Information
  </div>
  <div class="box-content">
<p>Attention, si une fonction est d√©clar√©e ou d√©finie dans une classe avec <code>friend</code>, <strong>il s&rsquo;agit d&rsquo;une fonction libre, pas d&rsquo;une fonction-membre</strong> !<br>
Pensez donc bien √† lui passer l&rsquo;objet qui vous int√©resse en param√®tre, car il n&rsquo;y a pas d&rsquo;instance courante.</p>
  </div>
</div>
<p>D√©clarez <code>operator&lt;&lt;</code> en tant qu&rsquo;amie de la classe <code>Polygon</code>, puis modifiez son impl√©mentation afin d&rsquo;afficher les coordonn√©es de chacun des sommets dans la console.</p>

<div class="hidden-solution">

    <button class="show-solution-btn" onclick="this.classList.add('off'); this.nextElementSibling.classList.remove('off');">
        ‚Æü Afficher la solution ‚Æü
    </button>

    <div class="off">
        <button class="hide-solution-btn" onclick="this.parentElement.classList.add('off'); this.parentElement.previousElementSibling.classList.remove('off');">
            ‚Æù Masquer la solution ‚Æù
        </button>

        <div class="hidden-solution-content">
            <p>L&rsquo;endroit o√π vous placez la d√©claration dans la classe n&rsquo;a pas d&rsquo;importance.
Les modificateurs de visibilit√© n&rsquo;ont pas d&rsquo;effet sur une d√©claration d&rsquo;amiti√©.</p>
<p>Dans <code>Polygon.h</code> :</p>
<div class="highlight wrap-code" hl_lines=[['\n' '\n']]><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Vertex</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Polygon</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line hl"><span class="cl">    <span class="k">friend</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Polygon</span> <span class="n">polygon</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">add_vertex</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">&gt;</span> <span class="n">_vertices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
<p>Dans <code>Polygon.cpp</code> :</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Polygon</span> <span class="n">polygon</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">v</span><span class="p">:</span> <span class="n">polygon</span><span class="p">.</span><span class="n">_vertices</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">stream</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;(&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;,&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;) &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>

        </div>
    </div>

</div>
<div class="box notices cstyle warning">
  <div class="box-label">
    <i class="fa-fw fas fa-exclamation-triangle"></i> Avertissement
  </div>
  <div class="box-content">
<p>Le m√©canisme d&rsquo;amiti√© brise l&rsquo;encapsulation d&rsquo;une classe.
C&rsquo;est donc un √©l√©ment du langage qu&rsquo;il faut √©viter d&rsquo;utiliser si on peut s&rsquo;en passer.<br>
Dans le cas ci-dessus, c&rsquo;est acceptable car on ne peut pas d√©finir l&rsquo;op√©rateur de flux en tant que fonction-membre de <code>Polygon</code> (la premi√®re op√©rande √©tant un <code>std::ostream</code>).</p>
  </div>
</div>
<hr>
<h3 id="synth√®se">Synth√®se</h3>
<ul>
<li>Pour d√©finir un alias sur un type, on utilise <code>using</code> : <code>using SimpleName = std::difficult_thing&lt;std::to_read&lt;std::horrible&gt;&gt;;</code></li>
<li>Un op√©rateur est une fonction libre ou une fonction-membre dont l&rsquo;identifiant commence par <code>operator</code>, et qui peut √™tre appel√©e avec une syntaxe plus naturelle.</li>
<li>On peut d√©clarer des fonctions libres en tant qu&rsquo;amies d&rsquo;une classe avec <code>friend</code>, pour qu&rsquo;elles puissent acc√©der aux membres priv√©s de la classe.</li>
<li>Pour d√©finir l&rsquo;op√©rateur de flux <code>&lt;&lt;</code> permettant d&rsquo;afficher le contenu d&rsquo;un objet, on impl√©mente : <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, &lt;type&gt; object) { ... }</code></li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation showVisitedLinks">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a id="logo" href="../../">üéÑ C++ üéÑ</a>

        </div>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/chapter0/index.html"><a class="padding" href="../../chapter0/index.html"><b>0- </b>Mise en place<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-bb41caf94f12b8a1a4b5e560230e7851" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter1/index.html"><a class="padding" href="../../chapter1/index.html"><b>1- </b>Introduction au C&#43;&#43;<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-6c398714eae4372920aec3a1e6c2e143" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/chapter2/index.html"><a class="padding" href="../../chapter2/index.html"><b>2- </b>Classes<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b1df0095a9fd74320697a6d478418ec3" class="collapsible-menu">
            <li class="" data-nav-id="/chapter2/1-poo/index.html"><a class="padding" href="../../chapter2/1-poo/index.html">C&#39;est quoi un objet d√©j√† ?<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/chapter2/2-first-class/index.html"><a class="padding" href="../../chapter2/2-first-class/index.html">Premi√®re classe ‚ú®<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/chapter2/3-constructor/index.html"><a class="padding" href="../../chapter2/3-constructor/index.html">Constructeur üî®<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/chapter2/4-destructor/index.html"><a class="padding" href="../../chapter2/4-destructor/index.html">Destructeur üí£<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/chapter2/5-modules/index.html"><a class="padding" href="../../chapter2/5-modules/index.html">Modularit√© üß±<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="active " data-nav-id="/chapter2/6-polygon/index.html"><a class="padding" href="../../chapter2/6-polygon/index.html">Op√©rateurs ‚ûó<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/chapter2/test/index.html"><a class="padding" href="../../chapter2/test/index.html">Questionnaire ‚òë<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/chapter3/index.html"><a class="padding" href="../../chapter3/index.html"><b>3- </b>Cycle de vie<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-9f6546bce6f8e9a77063b71c880fd5b8" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter4/index.html"><a class="padding" href="../../chapter4/index.html"><b>4- </b>H√©ritage<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-48065e8b6e7e69533ca73b3931c8a0a1" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter5/index.html"><a class="padding" href="../../chapter5/index.html"><b>5- </b>Librairie standard<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-86528e6ba587b53932a1dafaa9cd375c" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter6/index.html"><a class="padding" href="../../chapter6/index.html"><b>6- </b>Algorithmes<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-016ee40825ff7c4aeecbac08a8ca264b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter9/index.html"><a class="padding" href="../../chapter9/index.html"><b>7- </b>Templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-24ddf636ccd0ce3ef39c8060d1779332" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/chapter10/index.html"><a class="padding" href="../../chapter10/index.html"><b>8- </b>Param√®tres de templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-66e6e0c58d73995ecc09e8fbbe358e51" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">Acc√®s rapide</div>
          <ul class="space">
            <li><a class="padding" href="https://github.com/Laefy/CPP_Learning_Code/"><i class='fab fa-github'></i> D√©p√¥t Cours</a></li>
            <li><a class="padding" href="https://github.com/Laefy/CPP_Exercises/"><i class='fab fa-github'></i> D√©p√¥t TPs</a></li>
            <li><a class="padding" href="../../slides/index.html"><i class='far fa-file-powerpoint'></i> Slides</a></li>
            <li><a class="padding" href="../../workflow/index.html"><i class='far fa-list-alt'></i> Workflow</a></li>
            <li><a class="padding" href="../../faq/index.html"><i class='fas fa-question-circle'></i> FAQ</a></li>
            <li><a class="padding" href="../../chapter0/6-tips/index.html"><i class='fa fa-rocket'></i> Astuces</a></li>
            <li><a class="padding" href="https://godbolt.org/"><i class='fas fa-cog'></i> Compiler Explorer</a></li>
            <li><a class="padding" href="https://en.cppreference.com/w/"><i class='fas fa-passport'></i> CPP-Ref</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Langue</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-fr" value="#R-select-language-fr" data-url="../../chapter2/6-polygon/index.html" lang="fr" selected>Fran√ßais</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Th√®me</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-mine" value="mine" selected>Mine</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks showVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Supprimer l&#39;historique</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
        <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          </div>
        </div>
      </div>
    </aside>
    <script src="../../js/clipboard.min.js?1729268718" defer></script>
    <script src="../../js/perfect-scrollbar.min.js?1729268718" defer></script>
    <script src="../../js/theme.js?1729268718" defer></script>



    


<button id="footer-question-btn" title="Envoyer un message √† propos du texte s√©lectionn√©" onclick="openQuestionForm()" disabled><i class="fas fa-question-circle"></i></button>

<div id="footer-question-window" disabled>
    <form id="question" method=POST action="https://formsubmit.co/3aa0f379a1aed9c454634cc2da153a7b"
        target="question-submitted" onsubmit="cleanQuestionFormContent()">

        <input type="email" name="email" placeholder="mon_email@smthg.com" required onchange="updateQuestionFormSubject()" />
        <textarea name="question" rows="7" cols="30" placeholder="Mon message..."></textarea>
        <input type="hidden" name="selection" />

        <input type="hidden" name="_replyto" />
        <input type="hidden" name="_subject" />
        <input type="hidden" name="_template" value="box" />
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_next" value="//question-submitted/" />

        <input type="submit" disabled style="display: none" aria-hidden="true" />
        <input type="submit" value="Envoyer" />
    </form>

    <iframe class="hidden" name="question-submitted" src=""></iframe>
</div>

<script>

    function updateQuestionFormSubject() {
        let email = document.querySelector('#question>input[name="email"]').value;
        document.querySelector('#question>input[name="_subject"]').value = "[C++][Chapitre 2] " + email + ", retour sur ta question";
    }

    function cleanQuestionFormContent() {

        function clean(element) {
            
            element.value = element.value.replace(/\[\.\./g, "[ ..");
        }

        clean(document.querySelector('#question>textarea[name="question"]'))
        clean(document.querySelector('#question>input[name="selection"]'))
    }

    function openQuestionForm() {
        document.getElementById("footer-question-window").removeAttribute("disabled");

        var selection = window.getSelection().toString();
        document.querySelector('#question>input[name="selection"]').value = selection
    }

    function updateQuestionWidgetState(event) {
        var body = document.getElementById("R-body-inner");
        var selection = window.getSelection();
        var question_window = document.getElementById("footer-question-window");

        document.getElementById("footer-question-btn").disabled =
            selection.isCollapsed ||
            body == null ||
            body.contains(selection.anchorNode) == false ||
            body.contains(selection.focusNode) == false;

        if (event !== undefined
            && event.type == "mouseup"
            && question_window.contains(event.target) == false
            && question_window.contains(document.activeElement) == false) {
            question_window.setAttribute("disabled", true);
        }
    }

    updateQuestionFormSubject();

    document.onmouseup = document.onkeyup = document.onselectionchange = updateQuestionWidgetState;
    updateQuestionWidgetState();

</script>


  </body>
</html>
