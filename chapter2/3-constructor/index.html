<!doctype html><html lang=fr dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619"><meta name=description content="Dans cet exercice, vous apprendrez √† param√©trer la construction de vos objets.
Constructeur √† param√®tres Ouvrez le fichier chap-02/2-constructor.cpp. Il contient une correction de l‚Äôexercice pr√©c√©dent.
Vous aviez impl√©ment√© une fonction-membre set_name dans la classe Person pour initialiser l‚Äôattribut _name. Or, ce serait bien d‚Äôune part de r√©ellement pouvoir initialiser cet attribut plut√¥t que de le modifier apr√®s l‚Äôinstanciation, et d‚Äôautre part, de supprimer ce setter, afin qu‚Äôune fois initialis√©, il ne soit plus possible de modifier _name."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Constructeur üî® :: Cours de C++ - Niveau Master"><meta name=twitter:description content="Dans cet exercice, vous apprendrez √† param√©trer la construction de vos objets.
Constructeur √† param√®tres Ouvrez le fichier chap-02/2-constructor.cpp. Il contient une correction de l‚Äôexercice pr√©c√©dent.
Vous aviez impl√©ment√© une fonction-membre set_name dans la classe Person pour initialiser l‚Äôattribut _name. Or, ce serait bien d‚Äôune part de r√©ellement pouvoir initialiser cet attribut plut√¥t que de le modifier apr√®s l‚Äôinstanciation, et d‚Äôautre part, de supprimer ce setter, afin qu‚Äôune fois initialis√©, il ne soit plus possible de modifier _name."><meta property="og:url" content="/chapter2/3-constructor/index.html"><meta property="og:site_name" content="Cours de C++ - Niveau Master"><meta property="og:title" content="Constructeur üî® :: Cours de C++ - Niveau Master"><meta property="og:description" content="Dans cet exercice, vous apprendrez √† param√©trer la construction de vos objets.
Constructeur √† param√®tres Ouvrez le fichier chap-02/2-constructor.cpp. Il contient une correction de l‚Äôexercice pr√©c√©dent.
Vous aviez impl√©ment√© une fonction-membre set_name dans la classe Person pour initialiser l‚Äôattribut _name. Or, ce serait bien d‚Äôune part de r√©ellement pouvoir initialiser cet attribut plut√¥t que de le modifier apr√®s l‚Äôinstanciation, et d‚Äôautre part, de supprimer ce setter, afin qu‚Äôune fois initialis√©, il ne soit plus possible de modifier _name."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="Classes"><meta itemprop=name content="Constructeur üî® :: Cours de C++ - Niveau Master"><meta itemprop=description content="Dans cet exercice, vous apprendrez √† param√©trer la construction de vos objets.
Constructeur √† param√®tres Ouvrez le fichier chap-02/2-constructor.cpp. Il contient une correction de l‚Äôexercice pr√©c√©dent.
Vous aviez impl√©ment√© une fonction-membre set_name dans la classe Person pour initialiser l‚Äôattribut _name. Or, ce serait bien d‚Äôune part de r√©ellement pouvoir initialiser cet attribut plut√¥t que de le modifier apr√®s l‚Äôinstanciation, et d‚Äôautre part, de supprimer ce setter, afin qu‚Äôune fois initialis√©, il ne soit plus possible de modifier _name."><meta itemprop=wordCount content="1527"><title>Constructeur üî® :: Cours de C++ - Niveau Master</title>
<link href=../../css/fontawesome-all.min.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1729268528 rel=stylesheet></noscript><link href=../../css/nucleus.css?1729268528 rel=stylesheet><link href=../../css/auto-complete.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1729268528 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1729268528 rel=stylesheet><link href=../../css/fonts.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1729268528 rel=stylesheet></noscript><link href=../../css/theme.css?1729268528 rel=stylesheet><link href=../../css/theme-mine.css?1729268528 rel=stylesheet id=R-variant-style><link href=../../css/chroma-relearn-light.css?1729268528 rel=stylesheet id=R-variant-chroma-style><link href=../../css/print.css?1729268528 rel=stylesheet media=print><script src=../../js/variant.js?1729268528></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.variants&&variants.init(["mine"]),window.T_Copy_to_clipboard=`Copier dans le presse-papiers`,window.T_Copied_to_clipboard=`Copi√© dans le presse-papiers!`,window.T_Copy_link_to_clipboard=`Copier le lien dans le presse-papiers`,window.T_Link_copied_to_clipboard=`Lien copi√© dans le presse-papiers!`,window.T_Reset_view=`R√©initialiser la vue`,window.T_View_reset=`Vue r√©initialis√©e!`,window.T_No_results_found=`Aucun r√©sultat trouv√© pour "{0}"`,window.T_N_results_found=`{1} r√©sultats trouv√©s pour "{0}"`</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=../../chapter2/3-constructor/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table des mati√®res (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><ul><li><a href=#constructeur-√†-param√®tres>Constructeur √† param√®tres</a></li><li><a href=#le-constructeur-par-d√©faut>Le constructeur par d√©faut</a></li><li><a href=#syntaxe-pour-linstanciation>Syntaxe pour l&rsquo;instanciation</a></li><li><a href=#√†-bas-les-setters>√Ä bas les setters</a></li><li><a href=#synth√®se>Synth√®se</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>Accueil</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../chapter2/index.html><span itemprop=name>Classes</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Constructeur üî®</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../chapter2/2-first-class/index.html title="Premi√®re classe ‚ú® (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../chapter2/4-destructor/index.html title="Destructeur üí£ (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Aller plus loin"><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter2" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=constructeur->Constructeur üî®</h1><p>Dans cet exercice, vous apprendrez √† param√©trer la construction de vos objets.</p><hr><h3 id=constructeur-√†-param√®tres>Constructeur √† param√®tres</h3><p>Ouvrez le fichier <code>chap-02/2-constructor.cpp</code>. Il contient une correction de l&rsquo;exercice pr√©c√©dent.</p><p>Vous aviez impl√©ment√© une fonction-membre <code>set_name</code> dans la classe <code>Person</code> pour initialiser l&rsquo;attribut <code>_name</code>. Or, ce serait bien d&rsquo;une part de r√©ellement pouvoir initialiser cet attribut plut√¥t que de le modifier apr√®s l&rsquo;instanciation, et d&rsquo;autre part, de supprimer ce <strong>setter</strong>, afin qu&rsquo;une fois initialis√©, il ne soit plus possible de modifier <code>_name</code>.</p><p>Pour faire cela, il va falloir que vous d√©finissiez une fonction sp√©ciale appel√©e <strong>constructeur</strong>.
Voici la syntaxe g√©n√©rique d&rsquo;un constructeur :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>ClassName</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>ClassName</span><span class=p>(</span><span class=n>type</span> <span class=n>p1</span><span class=p>,</span> <span class=n>type</span> <span class=n>p2</span><span class=p>,</span> <span class=p>...)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_attribute_1</span> <span class=p>{</span> <span class=cm>/* value for _attribute_1 */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>,</span> <span class=n>_attribute_2</span> <span class=p>{</span> <span class=cm>/* value for _attribute_2 */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>,</span> <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// some optional code
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>type</span> <span class=n>_attribute_1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>type</span> <span class=n>_attribute_2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Il s&rsquo;agit donc d&rsquo;une fonction sans type de retour, de m√™me nom que la classe. Les membres sont initialis√©s entre le prototype et le corps de la fonction, dans ce qui s&rsquo;appelle la <strong>liste d&rsquo;initialisation</strong>.</p><p>Voici un exemple de ce que cela peut donner sur une petite classe :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Dog</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Dog</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>breed</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_breed</span> <span class=p>{</span> <span class=n>breed</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>,</span> <span class=n>_name</span> <span class=p>{</span> <span class=n>name</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Dog named &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>name</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; has just been born!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>_breed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Et pour instancier la classe <code>Dog</code> avec le constructeur ci-dessus, on peut √©crire :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Dog</span> <span class=n>dog</span> <span class=p>{</span> <span class=s>&#34;Colley&#34;</span><span class=p>,</span> <span class=s>&#34;Lassie&#34;</span> <span class=p>};</span> 
</span></span></code></pre></div><p>Commencez par modifier votre fonction <code>main</code>, de mani√®re √† passer le nom <code>"Batman"</code> √† la construction de la variable <code>p</code>, puis supprimez l&rsquo;appel √† <code>set_name</code>.<br>Modifiez ensuite la classe <code>Person</code> pour lui ajouter un constructeur √† 1 param√®tre, dans lequel vous initialisez l&rsquo;attribut <code>_name</code>. Vous n&rsquo;√™tes pas oblig√© d&rsquo;initialiser <code>_age</code> dans la liste d&rsquo;initialisation du constructeur, car cet attribut est d√©j√† initialis√© au niveau de sa d√©finition (= <strong>class initializer</strong>).</p><p>Comme d&rsquo;habitude, compilez et testez ensuite votre programme.</p><div class=hidden-solution><button class=show-solution-btn onclick='this.classList.add("off"),this.nextElementSibling.classList.remove("off")'>
‚Æü Afficher la solution ‚Æü</button><div class=off><button class=hide-solution-btn onclick='this.parentElement.classList.add("off"),this.parentElement.previousElementSibling.classList.remove("off")'>
‚Æù Masquer la solution ‚Æù</button><div class=hidden-solution-content><p>Instanciation :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Person</span> <span class=n>p</span> <span class=p>{</span> <span class=s>&#34;Batman&#34;</span> <span class=p>};</span></span></span></code></pre></div><p>D√©finition du constructeur :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Person</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_name</span> <span class=p>{</span> <span class=n>name</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div></div><p>Batman n&rsquo;est pas n√© Batman. Batman est n√© Bruce Wayne.<br>Modifiez l&rsquo;instanciation de <code>p</code> de mani√®re √† passer deux param√®tres <code>name</code> et <code>surname</code> (qui signifie &ldquo;nom de famille&rdquo; et pas &ldquo;surnom&rdquo;).<br>Ajoutez l&rsquo;attribut correspondant <code>_surname</code> √† la classe et modifiez la d√©finition de son constructeur afin de prendre en compte ces changements.</p><div class=hidden-solution><button class=show-solution-btn onclick='this.classList.add("off"),this.nextElementSibling.classList.remove("off")'>
‚Æü Afficher la solution ‚Æü</button><div class=off><button class=hide-solution-btn onclick='this.parentElement.classList.add("off"),this.parentElement.previousElementSibling.classList.remove("off")'>
‚Æù Masquer la solution ‚Æù</button><div class=hidden-solution-content><p>Instanciation :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Person</span> <span class=n>p</span> <span class=p>{</span> <span class=s>&#34;Bruce&#34;</span><span class=p>,</span> <span class=s>&#34;Wayne&#34;</span> <span class=p>};</span></span></span></code></pre></div><p>D√©finition du constructeur :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Person</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>name</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>surname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_name</span> <span class=p>{</span> <span class=n>name</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>,</span> <span class=n>_surname</span> <span class=p>{</span> <span class=n>surname</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>string</span>  <span class=n>_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>string</span>  <span class=n>_surname</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>_age</span> <span class=o>=</span> <span class=mi>0u</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div></div><p>Renommez votre fonction <code>get_name</code> en <code>get_full_name</code> et r√©alisez les modifications n√©cessaires afin que celle-ci renvoie <code>"Bruce Wayne"</code> plut√¥t que <code>"Bruce"</code>.</p><div class=hidden-solution><button class=show-solution-btn onclick='this.classList.add("off"),this.nextElementSibling.classList.remove("off")'>
‚Æü Afficher la solution ‚Æü</button><div class=off><button class=hide-solution-btn onclick='this.parentElement.classList.add("off"),this.parentElement.previousElementSibling.classList.remove("off")'>
‚Æù Masquer la solution ‚Æù</button><div class=hidden-solution-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>get_full_name</span><span class=p>()</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=n>_name</span> <span class=o>+</span> <span class=s>&#34; &#34;</span> <span class=o>+</span> <span class=n>_surname</span><span class=p>;</span> <span class=p>}</span></span></span></code></pre></div></div></div></div><p>Pour terminer, supprimez le setter pour <code>_name</code>, puisque celui-ci n&rsquo;est plus utilis√©.</p><hr><h3 id=le-constructeur-par-d√©faut>Le constructeur par d√©faut</h3><p>Modifiez l&rsquo;instanciation de <code>p</code> dans la fonction <code>main</code> de mani√®re √† ne plus lui passer d&rsquo;arguments (comme c&rsquo;√©tait le cas avant de commencer l&rsquo;exercice) :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Person</span> <span class=n>p</span><span class=p>;</span></span></span></code></pre></div><p>Oups ! Le programme ne compile plus, alors qu&rsquo;il compilait tout √† l&rsquo;heure.<br>Commentez la d√©finition de votre constructeur, et essayez de compiler √† nouveau. √áa recompile&mldr;</p><p><strong>Pourquoi le programme compile quand on retire un constructeur ?</strong></p><p>Lorsque l&rsquo;utilisateur ne d√©finit aucun constructeur, le compilateur d√©finit (s&rsquo;il le peut) un constructeur qui n&rsquo;attend aucun argument.</p><p>Concernant le vocabulaire, on appelle :</p><ul><li><strong>constructeur par d√©faut</strong> tout constructeur qui n&rsquo;attend aucun param√®tre,</li><li><strong>impl√©mentation par d√©faut</strong> une impl√©mentation fournie automatiquement par le compilateur.</li></ul><p>Le compilateur d√©finit donc une <strong>impl√©mentation par d√©faut du constructeur par d√©faut</strong> (oui, c&rsquo;est long √† dire) si le programmeur ne d√©finit <strong>aucun</strong> constructeur.</p><p>L&rsquo;impl√©mentation par d√©faut du constructeur par d√©faut initialise les attributs de la classe selon les r√®gles suivantes :</p><ol><li>Si un class-initializer est fourni, on l&rsquo;utilise (comme pour <code>_age</code>).</li><li>S&rsquo;il n&rsquo;y a pas de class-initializer et que l&rsquo;attribut est une classe, on appelle son constructeur par d√©faut (comme pour <code>_name</code> qui, √©tant une <code>std::string</code>, est construit par d√©faut avec la cha√Æne vide).</li><li>S&rsquo;il n&rsquo;y a pas de class-initializer et que l&rsquo;attribut n&rsquo;est pas une classe, alors il ne se passe rien, et le contenu de l&rsquo;attribut est donc ind√©fini.</li></ol><p>Du coup, pour r√©pondre √† la question, le code original compilait car le compilateur d√©finissait un constructeur par d√©faut pour la classe <code>Person</code>.<br>Cependant, d√®s que vous avez introduit votre propre constructeur, le compilateur a suppos√© que vous n&rsquo;aviez plus besoin de l&rsquo;impl√©mentation par d√©faut qu&rsquo;il fournissait et l&rsquo;a supprim√©.<br>Il n&rsquo;√©tait alors plus possible d&rsquo;instancier la classe <code>Person</code> sans sp√©cifier d&rsquo;arguments.</p><p>Si vous voulez instancier une <code>Person</code> sans argument tout en conservant votre constructeur √† 2 param√®tres, vous devez d√©finir explicitement un constructeur par d√©faut (c&rsquo;est-√†-dire un constructeur sans param√®tre).</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Person</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Person</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>name</span><span class=p>,</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>surname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_name</span> <span class=p>{</span> <span class=n>name</span> <span class=p>},</span> <span class=n>_surname</span> <span class=p>{</span> <span class=n>surname</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Remarque</div><div class=box-content><p>1. Si aucun attribut n&rsquo;est initialis√© dans la liste d&rsquo;initialisation d&rsquo;un constructeur, il est n√©cessaire d&rsquo;omettre compl√®tement cette liste (c&rsquo;est-√†-dire √©crire <code>Person() {}</code> plut√¥t que <code>Person() : {}</code>).<br>2. Si un attribut n&rsquo;est pas initialis√© via la liste d&rsquo;initialisation, il est automatiquement initialis√© selon les m√™mes r√®gles que celles d√©finies pour l&rsquo;impl√©mentation par d√©faut du constructeur par d√©faut. C&rsquo;est la raison pour laquelle il n&rsquo;est pas n√©cessaire de sp√©cifier √† nouveau <code>_age</code> dans la liste d&rsquo;initialisation du constructeur √† 2 param√®tres.</p></div></div><hr><h3 id=syntaxe-pour-linstanciation>Syntaxe pour l&rsquo;instanciation</h3><p>Nous avons vu deux mani√®res d&rsquo;instancier une classe :</p><ul><li>avec 0 param√®tre : <code>Class obj;</code>,</li><li>avec N param√®tres : <code>Class obj { p1, p2, ..., pn };</code>.</li></ul><p>En r√©alit√©, on peut √©galement utiliser la syntaxe avec des <code>{}</code> lorsqu&rsquo;on initialise avec 0 param√®tre : <code>Class obj {};</code><br>Et on peut aussi utiliser la syntaxe avec des <code>()</code>, mais seulement si on a au moins 1 param√®tre : <code>Class obj(p1, p2, ..., pn);</code><br>Et enfin, lorsqu&rsquo;il n&rsquo;y a qu&rsquo;un seul param√®tre, on peut dans certains cas utiliser <code>= p</code> : <code>std::string s = "Batman";</code>.</p><p>Ces syntaxes s&rsquo;utilisent √©galement pour l&rsquo;instanciation des variables de types fondamentaux : <code>int a = 1;</code> / <code>int a { 1 };</code> / <code>int a(1);</code></p><p>Pour le moment, vous pouvez consid√©rer que ces m√©thodes sont plus ou moins √©quivalentes (√©videmment, ce n&rsquo;est pas le cas, sinon ce ne serait pas dr√¥le, mais nous y reviendrons un peu plus tard).<br>Comme indiqu√© dans le Chapitre 1, ne vous emb√™tez pas √† m√©moriser toutes ces r√®gles par coeur.
Retenez simplement que d&rsquo;autres variantes de syntaxe existent, pour que vous ne soyiez pas √©tonn√©s si vous les rencontrez dans du code que vous n&rsquo;avez pas √©crit.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Information</div><div class=box-content><p>Si vous choisissez d&rsquo;utiliser la syntaxe <code>()</code>, faites attention lorsque vous appelez le constructeur par d√©faut (= √† 0 param√®tre), car il faut alors compl√®tement omettre les parenth√®ses.<br>Si vous √©crivez <code>Class obj();</code> au lieu de <code>Class obj;</code>, le compilateur va r√¢ler.</p></div></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Remarque</div><div class=box-content><p>Pour initialiser des attributs dans la liste d&rsquo;initialisation, il est possible d&rsquo;utiliser <code>()</code> au lieu des <code>{}</code>.<br>Contrairement √† l&rsquo;initialisation des variables, on peut √©crire <code>: _attr()</code> sans rien dans les parenth√®ses. Incompr√©hensible n&rsquo;est-ce pas ? üòµ</p></div></div><hr><h3 id=√†-bas-les-setters>√Ä bas les setters</h3><p>L&rsquo;ajout de votre constructeur vous a permis de supprimer le setter pour <code>_name</code>, afin que l&rsquo;on ne puisse plus modifier l&rsquo;attribut apr√®s son initialisation.<br>Il reste le setter pour <code>_age</code>, qui ne pose pas sp√©cialement de probl√®me, si ce n&rsquo;est qu&rsquo;on peut remonter le temps avec. Et l√†, c&rsquo;est <em>Batman</em>, pas <em>Retour vers le futur</em> ü¶á</p><p>Vous allez donc remplacer votre fonction <code>set_age</code> par une fonction <code>wait</code>, qui permet d&rsquo;augmenter l&rsquo;√¢ge de votre objet.
Celle-ci prendra en param√®tre le nombre d&rsquo;ann√©es √† attendre.
Testez que votre programme fonctionne correctement.</p><div class=hidden-solution><button class=show-solution-btn onclick='this.classList.add("off"),this.nextElementSibling.classList.remove("off")'>
‚Æü Afficher la solution ‚Æü</button><div class=off><button class=hide-solution-btn onclick='this.parentElement.classList.add("off"),this.parentElement.previousElementSibling.classList.remove("off")'>
‚Æù Masquer la solution ‚Æù</button><div class=hidden-solution-content><p>Appel :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>p</span><span class=p>.</span><span class=n>wait</span><span class=p>(</span><span class=mi>23</span><span class=p>);</span></span></span></code></pre></div><p>D√©finition :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=nf>wait</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>years</span><span class=p>)</span> <span class=p>{</span> <span class=n>_age</span> <span class=o>+=</span> <span class=n>years</span><span class=p>;</span> <span class=p>}</span></span></span></code></pre></div></div></div></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Remarque</div><div class=box-content><p>D√©finir et utiliser des setters n&rsquo;est pas forc√©ment une mauvaise pratique. Ce qui est mauvais, c&rsquo;est de d√©finir des setters pour tous les attributs d&rsquo;une classe, sans prendre le temps de d√©finir au pr√©alable ses invariants (l&rsquo;√¢ge d&rsquo;une personne ne peut pas d√©cro√Ætre au cours de l&rsquo;ex√©cution).</p></div></div><hr><h3 id=synth√®se>Synth√®se</h3><ul><li>Un <strong>constructeur</strong> est une fonction-membre sans type de retour et ayant pour identifiant le nom de la classe.</li><li>La <strong>liste d&rsquo;initialisation</strong> permet d&rsquo;initialiser les attributs de la classe.</li><li>Si un attribut est initialis√© directement sur la ligne de sa d√©finition, on parle de <strong>class-initializer</strong>.</li><li>Si un constructeur n&rsquo;a aucun param√®tre, alors il s&rsquo;agit du <strong>constructeur par d√©faut</strong> de la classe.</li><li>Il est pr√©f√©rable d&rsquo;initialiser les attributs via des <strong>class-initializer</strong> ou la <strong>liste d&rsquo;initialisation</strong>, plut√¥t que de r√©assigner leur valeur apr√®s la construction.</li><li>Si on ne d√©finit aucun constructeur, le compilateur g√©n√®re l&rsquo;<strong>impl√©mentation par d√©faut</strong> du constructeur par d√©faut.</li></ul><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Avertissement</div><div class=box-content><p>Attention √† ne pas confondre <strong>constructeur par d√©faut</strong>, et <strong>impl√©mentation par d√©faut</strong> fournie par le compilateur.<br>Vous pouvez tr√®s bien impl√©menter vous-m√™me un constructeur par d√©faut, et le compilateur peut fournir une impl√©mentation par d√©faut pour d&rsquo;autres fonctions que le constructeur.</p></div></div><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class="default-animation showVisitedLinks"><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=../../>üéÑ C++ üéÑ</a></div></div><div id=R-homelinks class=default-animation><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/chapter0/index.html><a class=padding href=../../chapter0/index.html><b>0- </b>Mise en place<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-bb41caf94f12b8a1a4b5e560230e7851 class=collapsible-menu></ul></li><li data-nav-id=/chapter1/index.html><a class=padding href=../../chapter1/index.html><b>1- </b>Introduction au C++<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-6c398714eae4372920aec3a1e6c2e143 class=collapsible-menu></ul></li><li class=parent data-nav-id=/chapter2/index.html><a class=padding href=../../chapter2/index.html><b>2- </b>Classes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-b1df0095a9fd74320697a6d478418ec3 class=collapsible-menu><li data-nav-id=/chapter2/1-poo/index.html><a class=padding href=../../chapter2/1-poo/index.html>C'est quoi un objet d√©j√† ?<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter2/2-first-class/index.html><a class=padding href=../../chapter2/2-first-class/index.html>Premi√®re classe ‚ú®<i class="fa-fw fas fa-check read-icon"></i></a></li><li class=active data-nav-id=/chapter2/3-constructor/index.html><a class=padding href=../../chapter2/3-constructor/index.html>Constructeur üî®<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter2/4-destructor/index.html><a class=padding href=../../chapter2/4-destructor/index.html>Destructeur üí£<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter2/5-modules/index.html><a class=padding href=../../chapter2/5-modules/index.html>Modularit√© üß±<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter2/6-polygon/index.html><a class=padding href=../../chapter2/6-polygon/index.html>Op√©rateurs ‚ûó<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter2/test/index.html><a class=padding href=../../chapter2/test/index.html>Questionnaire ‚òë<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/chapter3/index.html><a class=padding href=../../chapter3/index.html><b>3- </b>Cycle de vie<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-9f6546bce6f8e9a77063b71c880fd5b8 class=collapsible-menu></ul></li><li data-nav-id=/chapter4/index.html><a class=padding href=../../chapter4/index.html><b>4- </b>H√©ritage<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-48065e8b6e7e69533ca73b3931c8a0a1 class=collapsible-menu></ul></li><li data-nav-id=/chapter5/index.html><a class=padding href=../../chapter5/index.html><b>5- </b>Librairie standard<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-86528e6ba587b53932a1dafaa9cd375c class=collapsible-menu></ul></li><li data-nav-id=/chapter6/index.html><a class=padding href=../../chapter6/index.html><b>6- </b>Algorithmes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-016ee40825ff7c4aeecbac08a8ca264b class=collapsible-menu></ul></li><li data-nav-id=/chapter9/index.html><a class=padding href=../../chapter9/index.html><b>7- </b>Templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-24ddf636ccd0ce3ef39c8060d1779332 class=collapsible-menu></ul></li><li data-nav-id=/chapter10/index.html><a class=padding href=../../chapter10/index.html><b>8- </b>Param√®tres de templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-66e6e0c58d73995ecc09e8fbbe358e51 class=collapsible-menu></ul></li></ul></div><div id=R-shortcuts><div class="nav-title padding">Acc√®s rapide</div><ul class=space><li><a class=padding href=https://github.com/Laefy/CPP_Learning_Code/><i class='fab fa-github'></i> D√©p√¥t Cours</a></li><li><a class=padding href=https://github.com/Laefy/CPP_Exercises/><i class='fab fa-github'></i> D√©p√¥t TPs</a></li><li><a class=padding href=../../slides/index.html><i class='far fa-file-powerpoint'></i> Slides</a></li><li><a class=padding href=../../workflow/index.html><i class='far fa-list-alt'></i> Workflow</a></li><li><a class=padding href=../../faq/index.html><i class='fas fa-question-circle'></i> FAQ</a></li><li><a class=padding href=../../chapter0/6-tips/index.html><i class='fa fa-rocket'></i> Astuces</a></li><li><a class=padding href=https://godbolt.org/><i class='fas fa-cog'></i> Compiler Explorer</a></li><li><a class=padding href=https://en.cppreference.com/w/><i class='fas fa-passport'></i> CPP-Ref</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Langue</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-fr value=#R-select-language-fr data-url=../../chapter2/3-constructor/index.html lang=fr selected>Fran√ßais</option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Th√®me</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-mine value=mine selected>Mine</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Supprimer l'historique</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=../../js/clipboard.min.js?1729268528 defer></script><script src=../../js/perfect-scrollbar.min.js?1729268528 defer></script><script src=../../js/theme.js?1729268528 defer></script><button id=footer-question-btn title="Envoyer un message √† propos du texte s√©lectionn√©" onclick=openQuestionForm() disabled><i class="fas fa-question-circle"></i></button><div id=footer-question-window disabled><form id=question method=POST action=https://formsubmit.co/3aa0f379a1aed9c454634cc2da153a7b target=question-submitted onsubmit=cleanQuestionFormContent()><input type=email name=email placeholder=mon_email@smthg.com required onchange=updateQuestionFormSubject()>
<textarea name=question rows=7 cols=30 placeholder="Mon message..."></textarea>
<input type=hidden name=selection>
<input type=hidden name=_replyto>
<input type=hidden name=_subject>
<input type=hidden name=_template value=box>
<input type=hidden name=_captcha value=false>
<input type=hidden name=_next value=//question-submitted/>
<input type=submit disabled style=display:none aria-hidden=true>
<input type=submit value=Envoyer></form><iframe class=hidden name=question-submitted src></iframe></div><script>function updateQuestionFormSubject(){let e=document.querySelector('#question>input[name="email"]').value;document.querySelector('#question>input[name="_subject"]').value="[C++][Chapitre 2] "+e+", retour sur ta question"}function cleanQuestionFormContent(){function e(e){e.value=e.value.replace(/\[\.\./g,"[ ..")}e(document.querySelector('#question>textarea[name="question"]')),e(document.querySelector('#question>input[name="selection"]'))}function openQuestionForm(){document.getElementById("footer-question-window").removeAttribute("disabled");var e=window.getSelection().toString();document.querySelector('#question>input[name="selection"]').value=e}function updateQuestionWidgetState(e){var t=document.getElementById("R-body-inner"),n=window.getSelection(),s=document.getElementById("footer-question-window");document.getElementById("footer-question-btn").disabled=n.isCollapsed||t==null||t.contains(n.anchorNode)==!1||t.contains(n.focusNode)==!1,e!==void 0&&e.type=="mouseup"&&s.contains(e.target)==!1&&s.contains(document.activeElement)==!1&&s.setAttribute("disabled",!0)}updateQuestionFormSubject(),document.onmouseup=document.onkeyup=document.onselectionchange=updateQuestionWidgetState,updateQuestionWidgetState()</script></body></html>