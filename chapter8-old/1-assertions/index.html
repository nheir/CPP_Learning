<!doctype html><html lang=fr dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619"><meta name=description content="Types d‚Äôerreurs Lorsqu‚Äôune erreur se produit dans un logiciel, il s‚Äôagit soit d‚Äôune erreur de programmation, soit d‚Äôune erreur d‚Äôutilisation du logiciel.
Voici quelques exemples :
Un pointeur null a √©t√© d√©r√©f√©renc√© : erreur de programmation. Le programme a demand√© √† l‚Äôutilisateur de rentrer une image, mais celui-ci a fournit un fichier texte : erreur d‚Äôutilisation. On a √©crit dans la case array.size() de array : erreur de programmation. L‚Äôutilisateur a entra√Æn√© ‚Äú-34‚Äù alors que le programme attendait un entier positif : erreur d‚Äôutilisation."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Assertions :: Cours de C++ - Niveau Master"><meta name=twitter:description content="Types d‚Äôerreurs Lorsqu‚Äôune erreur se produit dans un logiciel, il s‚Äôagit soit d‚Äôune erreur de programmation, soit d‚Äôune erreur d‚Äôutilisation du logiciel.
Voici quelques exemples :
Un pointeur null a √©t√© d√©r√©f√©renc√© : erreur de programmation. Le programme a demand√© √† l‚Äôutilisateur de rentrer une image, mais celui-ci a fournit un fichier texte : erreur d‚Äôutilisation. On a √©crit dans la case array.size() de array : erreur de programmation. L‚Äôutilisateur a entra√Æn√© ‚Äú-34‚Äù alors que le programme attendait un entier positif : erreur d‚Äôutilisation."><meta property="og:url" content="/chapter8-old/1-assertions/index.html"><meta property="og:site_name" content="Cours de C++ - Niveau Master"><meta property="og:title" content="Assertions :: Cours de C++ - Niveau Master"><meta property="og:description" content="Types d‚Äôerreurs Lorsqu‚Äôune erreur se produit dans un logiciel, il s‚Äôagit soit d‚Äôune erreur de programmation, soit d‚Äôune erreur d‚Äôutilisation du logiciel.
Voici quelques exemples :
Un pointeur null a √©t√© d√©r√©f√©renc√© : erreur de programmation. Le programme a demand√© √† l‚Äôutilisateur de rentrer une image, mais celui-ci a fournit un fichier texte : erreur d‚Äôutilisation. On a √©crit dans la case array.size() de array : erreur de programmation. L‚Äôutilisateur a entra√Æn√© ‚Äú-34‚Äù alors que le programme attendait un entier positif : erreur d‚Äôutilisation."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="Traitement d'erreurs"><meta itemprop=name content="Assertions :: Cours de C++ - Niveau Master"><meta itemprop=description content="Types d‚Äôerreurs Lorsqu‚Äôune erreur se produit dans un logiciel, il s‚Äôagit soit d‚Äôune erreur de programmation, soit d‚Äôune erreur d‚Äôutilisation du logiciel.
Voici quelques exemples :
Un pointeur null a √©t√© d√©r√©f√©renc√© : erreur de programmation. Le programme a demand√© √† l‚Äôutilisateur de rentrer une image, mais celui-ci a fournit un fichier texte : erreur d‚Äôutilisation. On a √©crit dans la case array.size() de array : erreur de programmation. L‚Äôutilisateur a entra√Æn√© ‚Äú-34‚Äù alors que le programme attendait un entier positif : erreur d‚Äôutilisation."><meta itemprop=wordCount content="1175"><title>Assertions :: Cours de C++ - Niveau Master</title>
<link href=../../css/fontawesome-all.min.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1729268528 rel=stylesheet></noscript><link href=../../css/nucleus.css?1729268528 rel=stylesheet><link href=../../css/auto-complete.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1729268528 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1729268528 rel=stylesheet><link href=../../css/fonts.css?1729268528 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1729268528 rel=stylesheet></noscript><link href=../../css/theme.css?1729268528 rel=stylesheet><link href=../../css/theme-mine.css?1729268528 rel=stylesheet id=R-variant-style><link href=../../css/chroma-relearn-light.css?1729268528 rel=stylesheet id=R-variant-chroma-style><link href=../../css/print.css?1729268528 rel=stylesheet media=print><script src=../../js/variant.js?1729268528></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.variants&&variants.init(["mine"]),window.T_Copy_to_clipboard=`Copier dans le presse-papiers`,window.T_Copied_to_clipboard=`Copi√© dans le presse-papiers!`,window.T_Copy_link_to_clipboard=`Copier le lien dans le presse-papiers`,window.T_Link_copied_to_clipboard=`Lien copi√© dans le presse-papiers!`,window.T_Reset_view=`R√©initialiser la vue`,window.T_View_reset=`Vue r√©initialis√©e!`,window.T_No_results_found=`Aucun r√©sultat trouv√© pour "{0}"`,window.T_N_results_found=`{1} r√©sultats trouv√©s pour "{0}"`</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=../../chapter8-old/1-assertions/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table des mati√®res (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><ul><li><a href=#types-derreurs>Types d&rsquo;erreurs</a></li><li><a href=#quest-ce-quune-assertion->Qu&rsquo;est-ce qu&rsquo;une assertion ?</a></li><li><a href=#comment-asserter->Comment asserter ?</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>Accueil</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Traitement d'erreurs</span><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Assertions</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../index.html title="Accueil (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../chapter8-old/2-exceptions/index.html title="Exceptions (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Aller plus loin"><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter8-old" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=assertions>Assertions</h1><hr><h3 id=types-derreurs>Types d&rsquo;erreurs</h3><p>Lorsqu&rsquo;une erreur se produit dans un logiciel, il s&rsquo;agit soit d&rsquo;une erreur de programmation, soit d&rsquo;une erreur d&rsquo;utilisation du logiciel.</p><p>Voici quelques exemples :</p><ol><li>Un pointeur null a √©t√© d√©r√©f√©renc√© : erreur de programmation.</li><li>Le programme a demand√© √† l&rsquo;utilisateur de rentrer une image, mais celui-ci a fournit un fichier texte : erreur d&rsquo;utilisation.</li><li>On a √©crit dans la case <code>array.size()</code> de <code>array</code> : erreur de programmation.</li><li>L&rsquo;utilisateur a entra√Æn√© &ldquo;-34&rdquo; alors que le programme attendait un entier positif : erreur d&rsquo;utilisation.</li><li>On a invers√© une condition dans un <code>if</code>, ce qui fait que le r√©sultat n&rsquo;√©tait pas le bon : erreur de programmation.</li></ol><p>Qu&rsquo;il s&rsquo;agisse d&rsquo;une erreur de programmation ou d&rsquo;une erreur d&rsquo;utilisation, le programme peut parfois entrer dans un √©tat instable.
Si on est chanceux, il va crasher imm√©diatement.
Si on n&rsquo;est moins chanceux, on peut se retrouver avec un crash √† l&rsquo;autre bout du programme (le cauchemar de l&rsquo;√©crasement m√©moire üò±), ou encore un bug qui semble n&rsquo;avoir aucun rapport avec l&rsquo;erreur d&rsquo;origine, et qui n&rsquo;arrive qu&rsquo;une fois tous les 3 mois, quand les plan√®tes sont align√©es.</p><p>Afin d&rsquo;√©viter ce genre de d√©boires, il est n√©cessaire de d√©tecter les erreurs le plus t√¥t possible pour adapter le comportement du programme.</p><p>Dans le cas des erreurs de programmation, on interrompera son ex√©cution imm√©diatement.
Si possible, on essayera de fournir des d√©tails sur l&rsquo;origine du probl√®me (nom du fichier, num√©ro de ligne, instruction, raison du crash, &mldr;).</p><p>Et dans le cas des erreurs d&rsquo;utilisation, on indiquera √† l&rsquo;utilisateur avec un joli message d&rsquo;erreur ce qu&rsquo;il a mal fait, et comment il aurait d√ª le faire.
On essayera aussi de faire en sorte que le programme puisse continuer son ex√©cution normalement.</p><hr><h3 id=quest-ce-quune-assertion->Qu&rsquo;est-ce qu&rsquo;une assertion ?</h3><p>Une assertion est une expression qui doit toujours √™tre √©valu√©e √† vraie.</p><p>En C++, le but des assertions, c&rsquo;est de faire crasher brutalement le programme si une condition n&rsquo;est pas respect√©e, afin d&rsquo;√©viter que des probl√®mes plus difficiles √† identifier ne se manifestent par la suite.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=n>AnimalCenter</span><span class=o>::</span><span class=n>adopt_dog</span><span class=p>(</span><span class=n>Someone</span><span class=o>&amp;</span> <span class=n>someone</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// If you don&#39;t like dogs, then you shouldn&#39;t end up here!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>assert</span><span class=p>(</span><span class=n>someone</span><span class=p>.</span><span class=n>like_dog</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>someone</span><span class=p>.</span><span class=n>receive</span><span class=p>(</span><span class=n>_dogs</span><span class=p>.</span><span class=n>front</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=n>_dogs</span><span class=p>.</span><span class=n>pop_front</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Comme on l&rsquo;a dit plus haut, seules les erreurs de programmation sont cens√©es entra√Æner la fin du programme.
Les assertions vont donc servir √† identifier ce type d&rsquo;erreurs, pour aider les programmeurs √† corriger les failles de leur programme.</p><p>Normalement, une fois la phase de production et de debug d&rsquo;un logiciel termin√©e, plus aucune assertion n&rsquo;est cens√©e √©chou√©e.
Puisqu&rsquo;il n&rsquo;est pas n√©cessaire d&rsquo;√©valuer des conditions suppos√©es √™tre toujours vraies, les assertions sont du coup g√©n√©ralement d√©sactiv√©es avant de d√©ployer le programme chez le client.
Cela permet de gagner en performances.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Information</div><div class=box-content><p>Il ne faut <strong>jamais</strong> utiliser des assertions pour traiter des erreurs d&rsquo;utilisation.
Personne n&rsquo;a envie de voir son logiciel crasher juste avant la sauvegarde d&rsquo;un document, parce qu&rsquo;il a essay√© de mettre un accent dans le nom du fichier, ou parce que le disque dur √©tait plein.
En plus, comme les assertions sont d√©sactiv√©es une fois le logiciel d√©ploy√©, votre client risque de se retrouver avec des bugs que vous n&rsquo;aurez jamais rencontr√©s.</p></div></div><hr><h3 id=comment-asserter->Comment asserter ?</h3><p>En C++, il est possible d&rsquo;utiliser la macro <code>assert</code> disponible dans le header <code>&lt;cassert></code>.</p><hr><h5 id=utilisation-de-assert>Utilisation de <code>assert</code></h5><p>Celle-ci prend en param√®tre une condition.
Si elle est √©valu√©e √† vraie, alors le programme continue.
Autrement, le programme est interrompu et un message d&rsquo;erreur est affich√©.
Ce dernier pr√©sente le contenu de l&rsquo;assertion, le chemin du fichier et le num√©ro de la ligne o√π elle est √©crite.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Class</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>initialize</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>p1</span><span class=p>,</span> <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>p2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// On peut v√©rifier la validit√© des param√®tres qu&#39;on nous donne (IllegalArgumentException en Java).
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>assert</span><span class=p>(</span><span class=n>p1</span> <span class=o>&lt;</span> <span class=n>p2</span> <span class=o>&amp;&amp;</span> <span class=n>p2</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// On peut aussi v√©rifier les pr√©-conditions de la fonction courante (IllegalStateException en Java).
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>assert</span><span class=p>(</span><span class=o>!</span><span class=n>_attr</span><span class=p>.</span><span class=n>is_valid</span><span class=p>());</span> <span class=c1>// on n&#39;est pas cens√© appeler Class::initialize() si _attr est d√©j√† valide. 
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// On peut √©galement v√©rifier les post-conditions d&#39;une fonction que l&#39;on appelle.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>_attr</span><span class=p>.</span><span class=n>set_params</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span><span class=p>(</span><span class=n>_attr</span><span class=p>.</span><span class=n>is_valid</span><span class=p>());</span> <span class=c1>// _attr.set_params() est cens√© rendre _attr valid. 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>process</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Param√®tre
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>assert</span><span class=p>(</span><span class=n>value</span> <span class=o>!=</span> <span class=k>nullptr</span><span class=p>);</span> <span class=c1>// On attend un pointeur non-null.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// Pr√©-condition de Class::process
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>assert</span><span class=p>(</span><span class=n>_attr</span><span class=p>.</span><span class=n>is_valid</span><span class=p>());</span> <span class=c1>// Class::process() ne doit pas √™tre appel√©e si _attr n&#39;est pas valide. 
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// Post-condition de _attr::process
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>_attr</span><span class=p>.</span><span class=n>process</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>move</span><span class=p>(</span><span class=n>value</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span><span class=p>(</span><span class=n>_attr</span><span class=p>.</span><span class=n>is_valid</span><span class=p>());</span> <span class=c1>// _attr.process() n&#39;est pas cens√© modifier la validit√© de _attr.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Attr</span> <span class=n>_attr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Square</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>do_stuff</span><span class=p>(...)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// On peut √©galement v√©rifier les invariants d&#39;une classe.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>assert</span><span class=p>(</span><span class=n>all_segments_have_same_length</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=n>do_some_stuff</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span><span class=p>(</span><span class=n>all_segments_have_same_length</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=n>do_some_other_stuff</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span><span class=p>(</span><span class=n>all_segments_have_same_length</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>all_segments_have_same_length</span><span class=p>()</span> <span class=k>const</span> <span class=p>{</span> <span class=k>return</span> <span class=p>...;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>array</span><span class=o>&lt;</span><span class=n>Point</span><span class=p>,</span> <span class=mi>4</span><span class=o>&gt;</span> <span class=n>_points</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Remarque</div><div class=box-content><p>La <a href=https://fr.wikipedia.org/wiki/Programmation_par_contrat rel=external target=_blank>programmation par contrat</a> est un paradigme qui consiste √† v√©rifier tout un tas d&rsquo;assertions au cours de l&rsquo;ex√©cution d&rsquo;un programme pour s&rsquo;assurer qu&rsquo;il est bien dans l&rsquo;√©tat attendu.
Un m√©canisme de programmation par contrat aurait d√ª √™tre introduit nativement dans le langage en C++20, mais cela n&rsquo;a finalement pas eu lieu.
Pour l&rsquo;instant, les macros de type <code>assert</code> restent donc l&rsquo;outil standard pour essayer de programmer par contrat en C++.</p></div></div><p>Comme <code>assert</code> n&rsquo;est pas tr√®s verbeux, il est possible d&rsquo;ajouter <code>&& "un message"</code> au contenu de l&rsquo;assertion.
Si la condition est v√©rifi√©e, alors <code>&& "un message"</code> ne changera rien, car une cha√Æne de caract√®res convertie en <code>bool</code> vaut forc√©ment <code>true</code>.
Et si l&rsquo;assertion √©choue, la condition compl√®te sera affich√©e dans le message d&rsquo;erreur.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// Si l&#39;assertion √©choue, on aura comme message :
</span></span></span><span class=line><span class=cl><span class=c1>// Assertion failed: _attr_.is_valid() &amp;&amp; &#34;you probably need to call Initialize() function&#34;, file ###.cpp, line ### 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>assert</span><span class=p>(</span><span class=n>_attr_</span><span class=p>.</span><span class=n>is_valid</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=s>&#34;you probably need to call initialize() function&#34;</span><span class=p>);</span></span></span></code></pre></div><hr><h5 id=d√©sactivation-en-release>D√©sactivation en Release</h5><p>Il faut savoir que lorsque la constante <code>NDEBUG</code> est d√©finie, la macro <code>assert</code> ne fait plus rien.
En particulier, son contenu n&rsquo;est plus √©valu√©.
Ce syst√®me permet donc de d√©sactiver les assertions en release.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#define NDEBUG
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cassert&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>this_will_never_be_called</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;You can&#39;t see me... I&#39;m a shadow...&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>assert</span><span class=p>(</span><span class=n>this_will_never_be_called</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Avertissement</div><div class=box-content><p>Attention √† ne pas appeler n&rsquo;importe quelle fonction √† l&rsquo;int√©rieur d&rsquo;un <code>assert</code>.
Par exemple, si vous √©crivez quelque chose comme <code>assert(my_set.insert(value))</code>, soyez bien conscient que l&rsquo;insertion n&rsquo;aura lieu que si vous √™tes en mode debug.</p></div></div><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Astuce</div><div class=box-content><p>Il n&rsquo;est pas n√©cessaire d&rsquo;√©crire <code>#define NDEBUG</code> dans tous les fichiers lorsqu&rsquo;on veut passer en Release.
Des arguments peuvent √™tre fournis √† la commande de compilation pour d√©finir des constantes (<code>gcc -c *.cpp -o program -DNDEBUG</code>) sans avoir √† changer les sources.
D&rsquo;ailleurs, par d√©faut, CMake ajoute tout seul <code>-DNDEBUG</code> √† la ligne de commande de la build Release.</p></div></div><hr><h5 id=red√©finir-son-propre-assert>Red√©finir son propre assert</h5><p>Si vous trouvez que <code>assert</code> ne vous donne pas suffisamment d&rsquo;informations, vous pouvez tout √† fait d√©finir votre propre macro d&rsquo;assertion.
Par exemple, celle-ci vous permettra d&rsquo;afficher le contenu d&rsquo;une variable :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#ifndef NDEBUG
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#define super_assert(cdn, msg)                                                  \
</span></span></span><span class=line><span class=cl><span class=cp>    if (!cdn)                                                                   \
</span></span></span><span class=line><span class=cl><span class=cp>    {                                                                           \
</span></span></span><span class=line><span class=cl><span class=cp>        std::cerr &lt;&lt; &#34;Assertion failed: &#34; &lt;&lt; #cdn                               \
</span></span></span><span class=line><span class=cl><span class=cp>                  &lt;&lt; &#34;\nLocation: &#34; &lt;&lt; __FILE__ &lt;&lt; &#34; (ln.&#34; &lt;&lt; __LINE__ &lt;&lt; &#34;)&#34;   \
</span></span></span><span class=line><span class=cl><span class=cp>                  &lt;&lt; &#34;\nReason: &#34; &lt;&lt; msg                                        \
</span></span></span><span class=line><span class=cl><span class=cp>                  &lt;&lt; std::endl;                                                 \
</span></span></span><span class=line><span class=cl><span class=cp>        std::terminate();                                                       \
</span></span></span><span class=line><span class=cl><span class=cp>    }
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#else
</span></span></span><span class=line><span class=cl><span class=cp>#define super_assert(cdn, msg) ;
</span></span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>fcn</span><span class=p>(</span><span class=kt>int</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>super_assert</span><span class=p>(</span><span class=n>value</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>100</span> <span class=o>&amp;&amp;</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class="default-animation showVisitedLinks"><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=../../>üéÑ C++ üéÑ</a></div></div><div id=R-homelinks class=default-animation><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/chapter0/index.html><a class=padding href=../../chapter0/index.html><b>0- </b>Mise en place<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-bb41caf94f12b8a1a4b5e560230e7851 class=collapsible-menu></ul></li><li data-nav-id=/chapter1/index.html><a class=padding href=../../chapter1/index.html><b>1- </b>Introduction au C++<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-6c398714eae4372920aec3a1e6c2e143 class=collapsible-menu></ul></li><li data-nav-id=/chapter2/index.html><a class=padding href=../../chapter2/index.html><b>2- </b>Classes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-b1df0095a9fd74320697a6d478418ec3 class=collapsible-menu></ul></li><li data-nav-id=/chapter3/index.html><a class=padding href=../../chapter3/index.html><b>3- </b>Cycle de vie<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-9f6546bce6f8e9a77063b71c880fd5b8 class=collapsible-menu></ul></li><li data-nav-id=/chapter4/index.html><a class=padding href=../../chapter4/index.html><b>4- </b>H√©ritage<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-48065e8b6e7e69533ca73b3931c8a0a1 class=collapsible-menu></ul></li><li data-nav-id=/chapter5/index.html><a class=padding href=../../chapter5/index.html><b>5- </b>Librairie standard<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-86528e6ba587b53932a1dafaa9cd375c class=collapsible-menu></ul></li><li data-nav-id=/chapter6/index.html><a class=padding href=../../chapter6/index.html><b>6- </b>Algorithmes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-016ee40825ff7c4aeecbac08a8ca264b class=collapsible-menu></ul></li><li data-nav-id=/chapter9/index.html><a class=padding href=../../chapter9/index.html><b>7- </b>Templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-24ddf636ccd0ce3ef39c8060d1779332 class=collapsible-menu></ul></li><li data-nav-id=/chapter10/index.html><a class=padding href=../../chapter10/index.html><b>8- </b>Param√®tres de templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-66e6e0c58d73995ecc09e8fbbe358e51 class=collapsible-menu></ul></li></ul></div><div id=R-shortcuts><div class="nav-title padding">Acc√®s rapide</div><ul class=space><li><a class=padding href=https://github.com/Laefy/CPP_Learning_Code/><i class='fab fa-github'></i> D√©p√¥t Cours</a></li><li><a class=padding href=https://github.com/Laefy/CPP_Exercises/><i class='fab fa-github'></i> D√©p√¥t TPs</a></li><li><a class=padding href=../../slides/index.html><i class='far fa-file-powerpoint'></i> Slides</a></li><li><a class=padding href=../../workflow/index.html><i class='far fa-list-alt'></i> Workflow</a></li><li><a class=padding href=../../faq/index.html><i class='fas fa-question-circle'></i> FAQ</a></li><li><a class=padding href=../../chapter0/6-tips/index.html><i class='fa fa-rocket'></i> Astuces</a></li><li><a class=padding href=https://godbolt.org/><i class='fas fa-cog'></i> Compiler Explorer</a></li><li><a class=padding href=https://en.cppreference.com/w/><i class='fas fa-passport'></i> CPP-Ref</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Langue</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-fr value=#R-select-language-fr data-url=../../chapter8-old/1-assertions/index.html lang=fr selected>Fran√ßais</option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Th√®me</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-mine value=mine selected>Mine</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Supprimer l'historique</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=../../js/clipboard.min.js?1729268528 defer></script><script src=../../js/perfect-scrollbar.min.js?1729268528 defer></script><script src=../../js/theme.js?1729268528 defer></script><button id=footer-question-btn title="Envoyer un message √† propos du texte s√©lectionn√©" onclick=openQuestionForm() disabled><i class="fas fa-question-circle"></i></button><div id=footer-question-window disabled><form id=question method=POST action=https://formsubmit.co/3aa0f379a1aed9c454634cc2da153a7b target=question-submitted onsubmit=cleanQuestionFormContent()><input type=email name=email placeholder=mon_email@smthg.com required onchange=updateQuestionFormSubject()>
<textarea name=question rows=7 cols=30 placeholder="Mon message..."></textarea>
<input type=hidden name=selection>
<input type=hidden name=_replyto>
<input type=hidden name=_subject>
<input type=hidden name=_template value=box>
<input type=hidden name=_captcha value=false>
<input type=hidden name=_next value=//question-submitted/>
<input type=submit disabled style=display:none aria-hidden=true>
<input type=submit value=Envoyer></form><iframe class=hidden name=question-submitted src></iframe></div><script>function updateQuestionFormSubject(){let e=document.querySelector('#question>input[name="email"]').value;document.querySelector('#question>input[name="_subject"]').value="[C++][Chapitre 7] "+e+", retour sur ta question"}function cleanQuestionFormContent(){function e(e){e.value=e.value.replace(/\[\.\./g,"[ ..")}e(document.querySelector('#question>textarea[name="question"]')),e(document.querySelector('#question>input[name="selection"]'))}function openQuestionForm(){document.getElementById("footer-question-window").removeAttribute("disabled");var e=window.getSelection().toString();document.querySelector('#question>input[name="selection"]').value=e}function updateQuestionWidgetState(e){var t=document.getElementById("R-body-inner"),n=window.getSelection(),s=document.getElementById("footer-question-window");document.getElementById("footer-question-btn").disabled=n.isCollapsed||t==null||t.contains(n.anchorNode)==!1||t.contains(n.focusNode)==!1,e!==void 0&&e.type=="mouseup"&&s.contains(e.target)==!1&&s.contains(document.activeElement)==!1&&s.setAttribute("disabled",!0)}updateQuestionFormSubject(),document.onmouseup=document.onkeyup=document.onselectionchange=updateQuestionWidgetState,updateQuestionWidgetState()</script></body></html>