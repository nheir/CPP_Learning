<!doctype html><html lang=fr dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619"><meta name=description content="Pour terminer ce chapitre, nous allons voir comment faire pour acc√©der directement aux attributs de votre classe de base, comment appeler la fonction parent depuis la r√©d√©finition de cette fonction dans la classe-fille et enfin, comment mod√©liser des classes abstraites.
Pour cet exercice, vous modifierez les fichiers :
- chap-04/3-vehicles/Program.cpp
- chap-04/3-vehicles/Vehicle.h
- chap-04/3-vehicles/Car.h
- chap-04/3-vehicles/Scooter.h
La cible √† compiler est c4-3-vehicles.
Introduction du permis Dans le programme que l‚Äôon vous fournit, n‚Äôimporte qui peut conduire n‚Äôimporte quoi."><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="üöó V√©hicule partag√© :: Cours de C++ - Niveau Master"><meta name=twitter:description content="Pour terminer ce chapitre, nous allons voir comment faire pour acc√©der directement aux attributs de votre classe de base, comment appeler la fonction parent depuis la r√©d√©finition de cette fonction dans la classe-fille et enfin, comment mod√©liser des classes abstraites.
Pour cet exercice, vous modifierez les fichiers :
- chap-04/3-vehicles/Program.cpp
- chap-04/3-vehicles/Vehicle.h
- chap-04/3-vehicles/Car.h
- chap-04/3-vehicles/Scooter.h
La cible √† compiler est c4-3-vehicles.
Introduction du permis Dans le programme que l‚Äôon vous fournit, n‚Äôimporte qui peut conduire n‚Äôimporte quoi."><meta property="og:url" content="/chapter4/5-vehicles/index.html"><meta property="og:site_name" content="Cours de C++ - Niveau Master"><meta property="og:title" content="üöó V√©hicule partag√© :: Cours de C++ - Niveau Master"><meta property="og:description" content="Pour terminer ce chapitre, nous allons voir comment faire pour acc√©der directement aux attributs de votre classe de base, comment appeler la fonction parent depuis la r√©d√©finition de cette fonction dans la classe-fille et enfin, comment mod√©liser des classes abstraites.
Pour cet exercice, vous modifierez les fichiers :
- chap-04/3-vehicles/Program.cpp
- chap-04/3-vehicles/Vehicle.h
- chap-04/3-vehicles/Car.h
- chap-04/3-vehicles/Scooter.h
La cible √† compiler est c4-3-vehicles.
Introduction du permis Dans le programme que l‚Äôon vous fournit, n‚Äôimporte qui peut conduire n‚Äôimporte quoi."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="H√©ritage"><meta itemprop=name content="üöó V√©hicule partag√© :: Cours de C++ - Niveau Master"><meta itemprop=description content="Pour terminer ce chapitre, nous allons voir comment faire pour acc√©der directement aux attributs de votre classe de base, comment appeler la fonction parent depuis la r√©d√©finition de cette fonction dans la classe-fille et enfin, comment mod√©liser des classes abstraites.
Pour cet exercice, vous modifierez les fichiers :
- chap-04/3-vehicles/Program.cpp
- chap-04/3-vehicles/Vehicle.h
- chap-04/3-vehicles/Car.h
- chap-04/3-vehicles/Scooter.h
La cible √† compiler est c4-3-vehicles.
Introduction du permis Dans le programme que l‚Äôon vous fournit, n‚Äôimporte qui peut conduire n‚Äôimporte quoi."><meta itemprop=wordCount content="1105"><title>üöó V√©hicule partag√© :: Cours de C++ - Niveau Master</title>
<link href=../../css/fontawesome-all.min.css?1729268597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1729268597 rel=stylesheet></noscript><link href=../../css/nucleus.css?1729268597 rel=stylesheet><link href=../../css/auto-complete.css?1729268597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1729268597 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1729268597 rel=stylesheet><link href=../../css/fonts.css?1729268597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1729268597 rel=stylesheet></noscript><link href=../../css/theme.css?1729268597 rel=stylesheet><link href=../../css/theme-mine.css?1729268597 rel=stylesheet id=R-variant-style><link href=../../css/chroma-relearn-light.css?1729268597 rel=stylesheet id=R-variant-chroma-style><link href=../../css/print.css?1729268597 rel=stylesheet media=print><script src=../../js/variant.js?1729268597></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.variants&&variants.init(["mine"]),window.T_Copy_to_clipboard=`Copier dans le presse-papiers`,window.T_Copied_to_clipboard=`Copi√© dans le presse-papiers!`,window.T_Copy_link_to_clipboard=`Copier le lien dans le presse-papiers`,window.T_Link_copied_to_clipboard=`Lien copi√© dans le presse-papiers!`,window.T_Reset_view=`R√©initialiser la vue`,window.T_View_reset=`Vue r√©initialis√©e!`,window.T_No_results_found=`Aucun r√©sultat trouv√© pour "{0}"`,window.T_N_results_found=`{1} r√©sultats trouv√©s pour "{0}"`</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=../../chapter4/5-vehicles/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table des mati√®res (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><ul><li><a href=#introduction-du-permis>Introduction du permis</a></li><li><a href=#voiture-volante>Voiture volante</a></li><li><a href=#v√©hicule-abstrait>V√©hicule abstrait</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>Accueil</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../chapter4/index.html><span itemprop=name>H√©ritage</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>üöó V√©hicule partag√©</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../chapter4/4-polymorphism/index.html title="Polymorphisme (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=../../chapter4/test/index.html title="Questionnaire ! (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Aller plus loin"><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter4" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=-v√©hicule-partag√©>üöó V√©hicule partag√©</h1><p>Pour terminer ce chapitre, nous allons voir comment faire pour acc√©der directement aux attributs de votre classe de base,
comment appeler la fonction parent depuis la r√©d√©finition de cette fonction dans la classe-fille et enfin, comment mod√©liser des classes abstraites.</p><hr><p>Pour cet exercice, vous modifierez les fichiers :<br>- <code>chap-04/3-vehicles/Program.cpp</code><br>- <code>chap-04/3-vehicles/Vehicle.h</code><br>- <code>chap-04/3-vehicles/Car.h</code><br>- <code>chap-04/3-vehicles/Scooter.h</code></p><p>La cible √† compiler est <code>c4-3-vehicles</code>.</p><hr><h3 id=introduction-du-permis>Introduction du permis</h3><p>Dans le programme que l&rsquo;on vous fournit, n&rsquo;importe qui peut conduire n&rsquo;importe quoi.
Mais avec les nouvelles r√©gulations, les conducteurs de voiture doivent maintenant √™tre un possession d&rsquo;un permis B pour rouler.</p><p>Modifiez la classe <code>Driver</code> de mani√®re √† pouvoir savoir si un conducteur √† passer son permis ou non.
A la construction, aucun conducteur n&rsquo;a son permis et il peut l&rsquo;obtenir ensuite via une fonction <code>pass_car_licence_exam</code>.</p><div class=expand><input type=checkbox id=R-expand-b4d2faf3684651f3aea23cdbd622e817 aria-controls=R-expandcontent-b4d2faf3684651f3aea23cdbd622e817>
<label class=expand-label for=R-expand-b4d2faf3684651f3aea23cdbd622e817><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-b4d2faf3684651f3aea23cdbd622e817 class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Driver</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>pass_car_licence_exam</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_has_car_licence</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>has_car_licence</span><span class=p>()</span> <span class=k>const</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>_has_car_licence</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>_has_car_licence</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><p>Il va maintenant falloir que vous utilisiez cette fonction depuis <code>Car</code>.
Le probl√®me, c&rsquo;est que <code>_driver</code> n&rsquo;est accessible que depuis <code>Vehicle</code>, car c&rsquo;est un attribut priv√©.
Afin de pouvoir y acc√©der depuis les sous-classes, changez sa visibilit√© √† <code>protected</code>.</p><p>Modifiez ensuite l&rsquo;impl√©mentation de <code>Car::drive</code>, de fa√ßon √† ce que si le conduteur n&rsquo;ait pas son permis, la voiture n&rsquo;avance pas.</p><div class=expand><input type=checkbox id=R-expand-d5134424cbdf374ea4897c4ae79cb5e2 aria-controls=R-expandcontent-d5134424cbdf374ea4897c4ae79cb5e2>
<label class=expand-label for=R-expand-d5134424cbdf374ea4897c4ae79cb5e2><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-d5134424cbdf374ea4897c4ae79cb5e2 class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Vehicle</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>protected</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Driver</span><span class=o>&amp;</span> <span class=n>_driver</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Car</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Vehicle</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>drive</span><span class=p>()</span> <span class=k>const</span> <span class=k>override</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_driver</span><span class=p>.</span><span class=n>has_car_licence</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Vrooooom!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>_speed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;No car licence detected...&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>0u</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><hr><h3 id=voiture-volante>Voiture volante</h3><p>La nouvelle mode maintenant, ce sont les voitures volantes.
Les voitures volantes ont toutes les fonctionnalit√©s des voitures normales, si ce n&rsquo;est que lorsque vous rouler en l&rsquo;air, vous allez 10x plus vite qu&rsquo;en roulant au sol.</p><p>Introduisez la classe <code>FlyingCar</code>, d√©riv√©e de <code>Car</code>, et red√©finissez sa fonction <code>drive</code> pour parcourir 10 fois la distance que vous auriez parcouru avec une voiture normale.</p><div class=expand><input type=checkbox id=R-expand-1c23b36aabaa8a0e2c4ddbdc02f7f4aa aria-controls=R-expandcontent-1c23b36aabaa8a0e2c4ddbdc02f7f4aa>
<label class=expand-label for=R-expand-1c23b36aabaa8a0e2c4ddbdc02f7f4aa><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-1c23b36aabaa8a0e2c4ddbdc02f7f4aa class=expand-content><p>On peut :</p><ul><li>soit cr√©er un nouvel attribut <code>flying_speed</code>, et l&rsquo;utiliser dans <code>FlyingCar::drive</code>,</li><li>soit rendre <code>Car::_speed</code> <code>protected</code>, et retourner <code>10u * _speed</code> dans <code>FlyingCar::drive</code>.</li></ul><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>FlyingCar</span><span class=o>:</span> <span class=k>public</span> <span class=n>Car</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>FlyingCar</span><span class=p>(</span><span class=k>const</span> <span class=n>Driver</span><span class=o>&amp;</span> <span class=n>driver</span><span class=p>,</span> <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>speed</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>Car</span> <span class=p>{</span> <span class=n>driver</span><span class=p>,</span> <span class=n>speed</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>,</span> <span class=n>_flying_speed</span> <span class=p>{</span> <span class=mi>10u</span> <span class=o>*</span> <span class=n>speed</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=nf>drive</span><span class=p>()</span> <span class=k>const</span> <span class=k>override</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Sweeesh!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>_flying_speed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>_flying_speed</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><p>Chaque fois qu&rsquo;une nouvelle technologie arrive sur le march√©, les r√©gulations mettent un peu de temps √† arriver.
Dans le cas de la voiture volante, le conducteur doit d√©sormais √™tre en possession d&rsquo;un permis de l&rsquo;air pour pouvoir s&rsquo;en servir.
Commencez par ajouter ce qu&rsquo;il faut dans <code>Driver</code> pour passer le permis ad√©quat et savoir s&rsquo;il l&rsquo;a.</p><div class=expand><input type=checkbox id=R-expand-6006a8079e779b826bf1b66c70447262 aria-controls=R-expandcontent-6006a8079e779b826bf1b66c70447262>
<label class=expand-label for=R-expand-6006a8079e779b826bf1b66c70447262><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-6006a8079e779b826bf1b66c70447262 class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Driver</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>pass_air_licence_exam</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_has_air_licence</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>has_air_licence</span><span class=p>()</span> <span class=k>const</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>_has_air_licence</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>_has_air_licence</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><p>Vous allez maintenant devoir modifier la fonction <code>FlyingCar::drive</code>, afin que le conducteur ne puisse utiliser le mode volant que s&rsquo;il est √©quipp√© d&rsquo;un permis de l&rsquo;air.
Autrement, s&rsquo;il a son permis classique, il peut utiliser le mode roulant.</p><p>Dans une fonction red√©finie, il est possible de faire appel au comportement d√©fini dans la classe parente.
Pour cela, on utilise la syntaxe suivante :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>DerivedClass</span> <span class=o>:</span> <span class=k>public</span> <span class=n>BaseClass</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>DerivedClass</span><span class=o>::</span><span class=n>fcn</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>)</span> <span class=k>override</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Calling base behavior.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>BaseClass</span><span class=o>::</span><span class=n>fcn</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Then executing specific behavior.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Utilisez la syntaxe ci-dessus pour faire appel au comportement de base de <code>drive</code> dans le cas o√π le conducteur n&rsquo;a pas son permis de l&rsquo;air.<br>Testez ensuite les trois situations suivantes :<br>- si le conducteur a son permis de l&rsquo;air => mode volant,<br>- sinon, si le conducteur a son permis classique => mode roulant,<br>- sinon => la voiture n&rsquo;avance pas.</p><div class=expand><input type=checkbox id=R-expand-d1778195b55473bc2a5e9e4bec92413b aria-controls=R-expandcontent-d1778195b55473bc2a5e9e4bec92413b>
<label class=expand-label for=R-expand-d1778195b55473bc2a5e9e4bec92413b><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-d1778195b55473bc2a5e9e4bec92413b class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>FlyingCar</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Car</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>drive</span><span class=p>()</span> <span class=k>const</span> <span class=k>override</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>_driver</span><span class=p>.</span><span class=n>has_air_licence</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Sweeesh!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>_flying_speed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Car</span><span class=o>::</span><span class=n>drive</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div></div></div><hr><h3 id=v√©hicule-abstrait>V√©hicule abstrait</h3><p>Avec le code actuel, il est tout √† fait possible d&rsquo;instancier des classes <code>Vehicle</code>.
Cependant, cette classe ne devrait pas √™tre instanciable, puisqu&rsquo;elle est juste l√† pour d√©finir l&rsquo;interface que tous les v√©hicules doivent impl√©menter.
En Java, vous auriez d&rsquo;ailleurs probablement d√©fini le type <code>Vehicle</code> en utilisant une interface, ou √©ventuellement une classe abstraite.</p><p>En C++, il n&rsquo;existe pas pas de mot-clef permettant de d√©finir des interfaces ou des classes abstraites.
Vous pouvez n√©anmoins emp√™cher un utilisateur d&rsquo;instancier une classe qui ne devrait pas l&rsquo;√™tre via deux m√©canismes.</p><p><strong>1. Constructeur prot√©g√©</strong></p><p>On place le constructeur de la classe dans la partie <code>protected</code>. Ainsi, seule la classe elle-m√™me et les sous-classes peuvent appeler le constructeur de l&rsquo;objet.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>AbstractClass</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>protected</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>AbstractClass</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* Can only be instanciated from current and child classes  */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>AbstractClass</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>fcn_a</span><span class=p>(</span><span class=kt>int</span> <span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>fcn_b</span><span class=p>()</span> <span class=k>const</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>D√©clarez le constructeur de <code>Vehicle</code> dans la partie prot√©g√©e de la classe, et essayez d&rsquo;instancier un <code>Vehicle</code> depuis le <code>main</code>. Quelle erreur de compilation obtenez-vous ?</p><div class=expand><input type=checkbox id=R-expand-99ef64742faae13b342696ea6eac79dd aria-controls=R-expandcontent-99ef64742faae13b342696ea6eac79dd>
<label class=expand-label for=R-expand-99ef64742faae13b342696ea6eac79dd><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-99ef64742faae13b342696ea6eac79dd class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Vehicle</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>protected</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Vehicle</span><span class=p>(</span><span class=k>const</span> <span class=n>Driver</span><span class=o>&amp;</span> <span class=n>driver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_driver</span> <span class=p>{</span> <span class=n>driver</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Vehicle</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>A l&rsquo;instanciation, on obtient une erreur du style :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s1>&#39;Vehicle::Vehicle&#39;</span>: cannot access protected member declared in class <span class=s1>&#39;Vehicle&#39;</span></span></span></code></pre></div></div></div><p><strong>2. Fonction virtuelle pure</strong></p><p>Une fonction virtuelle pure est une d√©claration de fonction sans impl√©mentation.
Si vous essayez d&rsquo;instancier une classe contenant des fonctions virtuelles pures, le compilateur ne vous laissera pas faire.</p><p>Lorsque vous h√©ritez d&rsquo;une classe contenant des fonctions virtuelles pures, vous pouvez les red√©finir comme n&rsquo;importe quelle autre fonction virtuelle.
Vous pourrez ensuite instancier ces classes-filles, du moment que vous avez bien fourni une d√©finition √† chacune des fonctions virtuelles pures de la classe de base.</p><p>Pour d√©clarer une fonction virtuelle pure, il faut √©crire <code>= 0;</code> tout au bout de sa d√©claration :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Interface</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Interface</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>fcn_a</span><span class=p>(</span><span class=kt>int</span> <span class=n>p</span><span class=p>)</span> <span class=p>{}</span>    <span class=c1>// Classic virtual function.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>fcn_b</span><span class=p>()</span> <span class=k>const</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// Pure virtual function, that needs to be redefined in the derived class so that they can be instanciated.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span></span></span></code></pre></div><p>Remettez le constructeur de <code>Vehicle</code> dans la partie publique, puis supprimez l&rsquo;impl√©mentation de <code>Vehicle::drive</code> et transformez-la en fonction virtuelle pure.<br>Quelles erreurs de compilation obtenez-vous maintenant ?</p><div class=expand><input type=checkbox id=R-expand-db0e9dad185df478079d195cc8aaee25 aria-controls=R-expandcontent-db0e9dad185df478079d195cc8aaee25>
<label class=expand-label for=R-expand-db0e9dad185df478079d195cc8aaee25><i class="expander-icon fa-fw fas fa-chevron-down"></i>
<i class="expander-icon fa-fw fas fa-chevron-right"></i> Solution</label><div id=R-expandcontent-db0e9dad185df478079d195cc8aaee25 class=expand-content><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>class</span> <span class=nc>Vehicle</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>protected</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Vehicle</span><span class=p>(</span><span class=k>const</span> <span class=n>Driver</span><span class=o>&amp;</span> <span class=n>driver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span> <span class=n>_driver</span> <span class=p>{</span> <span class=n>driver</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Vehicle</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>unsigned</span> <span class=kt>int</span> <span class=nf>drive</span><span class=p>()</span> <span class=k>const</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>A l&rsquo;instanciation, on obtient quelque chose comme :</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=s1>&#39;Vehicle&#39;</span>: cannot instantiate abstract class
</span></span><span class=line><span class=cl>see declaration of <span class=s1>&#39;Vehicle&#39;</span>
</span></span><span class=line><span class=cl>due to following members:
</span></span><span class=line><span class=cl><span class=s1>&#39;unsigned int Vehicle::drive(void) const&#39;</span>: is abstract</span></span></code></pre></div></div></div><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class="default-animation showVisitedLinks"><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=../../>üéÑ C++ üéÑ</a></div></div><div id=R-homelinks class=default-animation><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/chapter0/index.html><a class=padding href=../../chapter0/index.html><b>0- </b>Mise en place<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-bb41caf94f12b8a1a4b5e560230e7851 class=collapsible-menu></ul></li><li data-nav-id=/chapter1/index.html><a class=padding href=../../chapter1/index.html><b>1- </b>Introduction au C++<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-6c398714eae4372920aec3a1e6c2e143 class=collapsible-menu></ul></li><li data-nav-id=/chapter2/index.html><a class=padding href=../../chapter2/index.html><b>2- </b>Classes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-b1df0095a9fd74320697a6d478418ec3 class=collapsible-menu></ul></li><li data-nav-id=/chapter3/index.html><a class=padding href=../../chapter3/index.html><b>3- </b>Cycle de vie<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-9f6546bce6f8e9a77063b71c880fd5b8 class=collapsible-menu></ul></li><li class=parent data-nav-id=/chapter4/index.html><a class=padding href=../../chapter4/index.html><b>4- </b>H√©ritage<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-48065e8b6e7e69533ca73b3931c8a0a1 class=collapsible-menu><li data-nav-id=/chapter4/1-hierarchy/index.html><a class=padding href=../../chapter4/1-hierarchy/index.html>üíº Hi√©rarchie professionnelle<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter4/2-farm/index.html><a class=padding href=../../chapter4/2-farm/index.html>üêÆ Concerto animalier<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter4/3-virtual/index.html><a class=padding href=../../chapter4/3-virtual/index.html>R√©solution d'appel virtuel<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter4/4-polymorphism/index.html><a class=padding href=../../chapter4/4-polymorphism/index.html>Polymorphisme<i class="fa-fw fas fa-check read-icon"></i></a></li><li class=active data-nav-id=/chapter4/5-vehicles/index.html><a class=padding href=../../chapter4/5-vehicles/index.html>üöó V√©hicule partag√©<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter4/test/index.html><a class=padding href=../../chapter4/test/index.html>Questionnaire !<i class="fa-fw fas fa-check read-icon"></i></a></li><li data-nav-id=/chapter4/summary/index.html><a class=padding href=../../chapter4/summary/index.html>Synth√®se<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/chapter5/index.html><a class=padding href=../../chapter5/index.html><b>5- </b>Librairie standard<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-86528e6ba587b53932a1dafaa9cd375c class=collapsible-menu></ul></li><li data-nav-id=/chapter6/index.html><a class=padding href=../../chapter6/index.html><b>6- </b>Algorithmes<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-016ee40825ff7c4aeecbac08a8ca264b class=collapsible-menu></ul></li><li data-nav-id=/chapter9/index.html><a class=padding href=../../chapter9/index.html><b>7- </b>Templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-24ddf636ccd0ce3ef39c8060d1779332 class=collapsible-menu></ul></li><li data-nav-id=/chapter10/index.html><a class=padding href=../../chapter10/index.html><b>8- </b>Param√®tres de templates<i class="fa-fw fas fa-check read-icon"></i></a><ul id=R-subsections-66e6e0c58d73995ecc09e8fbbe358e51 class=collapsible-menu></ul></li></ul></div><div id=R-shortcuts><div class="nav-title padding">Acc√®s rapide</div><ul class=space><li><a class=padding href=https://github.com/Laefy/CPP_Learning_Code/><i class='fab fa-github'></i> D√©p√¥t Cours</a></li><li><a class=padding href=https://github.com/Laefy/CPP_Exercises/><i class='fab fa-github'></i> D√©p√¥t TPs</a></li><li><a class=padding href=../../slides/index.html><i class='far fa-file-powerpoint'></i> Slides</a></li><li><a class=padding href=../../workflow/index.html><i class='far fa-list-alt'></i> Workflow</a></li><li><a class=padding href=../../faq/index.html><i class='fas fa-question-circle'></i> FAQ</a></li><li><a class=padding href=../../chapter0/6-tips/index.html><i class='fa fa-rocket'></i> Astuces</a></li><li><a class=padding href=https://godbolt.org/><i class='fas fa-cog'></i> Compiler Explorer</a></li><li><a class=padding href=https://en.cppreference.com/w/><i class='fas fa-passport'></i> CPP-Ref</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Langue</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-fr value=#R-select-language-fr data-url=../../chapter4/5-vehicles/index.html lang=fr selected>Fran√ßais</option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Th√®me</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-mine value=mine selected>Mine</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Supprimer l'historique</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=../../js/clipboard.min.js?1729268597 defer></script><script src=../../js/perfect-scrollbar.min.js?1729268597 defer></script><script src=../../js/theme.js?1729268597 defer></script><button id=footer-question-btn title="Envoyer un message √† propos du texte s√©lectionn√©" onclick=openQuestionForm() disabled><i class="fas fa-question-circle"></i></button><div id=footer-question-window disabled><form id=question method=POST action=https://formsubmit.co/3aa0f379a1aed9c454634cc2da153a7b target=question-submitted onsubmit=cleanQuestionFormContent()><input type=email name=email placeholder=mon_email@smthg.com required onchange=updateQuestionFormSubject()>
<textarea name=question rows=7 cols=30 placeholder="Mon message..."></textarea>
<input type=hidden name=selection>
<input type=hidden name=_replyto>
<input type=hidden name=_subject>
<input type=hidden name=_template value=box>
<input type=hidden name=_captcha value=false>
<input type=hidden name=_next value=//question-submitted/>
<input type=submit disabled style=display:none aria-hidden=true>
<input type=submit value=Envoyer></form><iframe class=hidden name=question-submitted src></iframe></div><script>function updateQuestionFormSubject(){let e=document.querySelector('#question>input[name="email"]').value;document.querySelector('#question>input[name="_subject"]').value="[C++][Chapitre 4] "+e+", retour sur ta question"}function cleanQuestionFormContent(){function e(e){e.value=e.value.replace(/\[\.\./g,"[ ..")}e(document.querySelector('#question>textarea[name="question"]')),e(document.querySelector('#question>input[name="selection"]'))}function openQuestionForm(){document.getElementById("footer-question-window").removeAttribute("disabled");var e=window.getSelection().toString();document.querySelector('#question>input[name="selection"]').value=e}function updateQuestionWidgetState(e){var t=document.getElementById("R-body-inner"),n=window.getSelection(),s=document.getElementById("footer-question-window");document.getElementById("footer-question-btn").disabled=n.isCollapsed||t==null||t.contains(n.anchorNode)==!1||t.contains(n.focusNode)==!1,e!==void 0&&e.type=="mouseup"&&s.contains(e.target)==!1&&s.contains(document.activeElement)==!1&&s.setAttribute("disabled",!0)}updateQuestionFormSubject(),document.onmouseup=document.onkeyup=document.onselectionchange=updateQuestionWidgetState,updateQuestionWidgetState()</script></body></html>